import{j as e,_ as g,G as y,b as l,J as d,al as v,m,Z as w,ai as x}from"./main-BdAAzOp_.js";import{C as N,d as C}from"./Card-BgwA5byp.js";import{A as b,a as k}from"./Alert-DT3fX0Ix.js";import{u as E,H as S,a as P,h as I}from"./HostedLayout-C9ABfqpe.js";import{C as M}from"./circle-check-big-BtZ3JG_-.js";import{C as R}from"./circle-x-SXQhcWML.js";import{M as V}from"./mail-nvpjyHZd.js";import"./circle-alert-DITzmtt1.js";function Y(){const h=E();return e.jsx(S,{searchParams:new URLSearchParams(window.location.search),children:e.jsx(A,{searchParams:h})})}function A({searchParams:h}){const f=g(),{config:i,tenantId:s}=P(),r=y(),[n,t]=l.useState("loading"),[p,c]=l.useState(null),a=new URLSearchParams(window.location.search).get("token");if(l.useEffect(()=>{if(!s||!a){t("error"),c(a?"Missing tenant ID":"Missing verification token");return}(async()=>{try{(await I({data:{token:a,tenantId:s}})).success?t("success"):(t("error"),c("Verification failed"))}catch(o){t("error"),c(o instanceof Error?o.message:"Invalid or expired verification link")}})()},[s,a]),!i||!s)return null;const j=()=>{const u=i.afterSignInUrl||"/hosted/sign-in";f({to:u,search:{tenant_id:s}})};return e.jsx(N,{className:"shadow-elevated",children:e.jsxs(C,{className:"pt-6",children:[n==="loading"&&e.jsxs(d.div,{initial:r?!1:{opacity:0},animate:{opacity:1},className:"text-center space-y-6 py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto",children:e.jsx(v,{className:"w-8 h-8 text-primary animate-spin"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Verifying your email..."}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Please wait while we verify your email address"})]})]}),n==="success"&&e.jsxs(d.div,{initial:r?!1:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center space-y-6 py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mx-auto",children:e.jsx(M,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Email verified!"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Your email has been successfully verified. You can now sign in to your account."})]}),e.jsx(m,{onClick:j,fullWidth:!0,rightIcon:e.jsx(w,{className:"h-4 w-4"}),children:"Continue to Sign In"})]}),n==="error"&&e.jsxs(d.div,{initial:r?!1:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center space-y-6 py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-destructive/10 rounded-full flex items-center justify-center mx-auto",children:e.jsx(R,{className:"w-8 h-8 text-destructive"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Verification failed"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:p||"The verification link is invalid or has expired."})]}),e.jsxs(b,{children:[e.jsx(V,{className:"h-4 w-4"}),e.jsx(k,{children:"Please request a new verification email or contact support if the problem persists."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(x,{to:"/hosted/sign-in",search:{tenant_id:s},className:"block",children:e.jsx(m,{fullWidth:!0,children:"Go to Sign In"})}),i.allowSignUp&&e.jsx(x,{to:"/hosted/sign-up",search:{tenant_id:s},className:"block",children:e.jsx(m,{variant:"outline",fullWidth:!0,children:"Create New Account"})})]})]})]})})}export{Y as component};
