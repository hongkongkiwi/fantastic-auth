import{at as J,b as m,G as Z,H as j,au as _,af as q,ag as Q,ah as ee,j as e,m as x,ai as se,av as te,a3 as R,I as ae,C as p,a6 as f,a7 as ne,K as g,N as re,J as ie,a4 as le,ak as S,L as d}from"./main-BdAAzOp_.js";import{C as a,d as n,a as u,b as h,c as B}from"./Card-BgwA5byp.js";import{B as v}from"./Badge-C3IvCy62.js";import{T as ce,a as de,b as N,c as y}from"./Tabs-c8LIGITi.js";import{a as D}from"./Skeleton-ChEia7iB.js";import{C as b}from"./circle-alert-DITzmtt1.js";import{C as K}from"./circle-check-BGQIKgJL.js";import{P as oe,a as me}from"./play-Bdy_HVjp.js";import{T as xe}from"./trash-2-BL6sv700.js";import{C as ue}from"./calendar-CUi8vfho.js";import{A as he}from"./activity-BRtGihx4.js";import{U as G}from"./user-CSbn4zdS.js";import{a0 as je,a1 as pe}from"./CategoricalChart-Cii7XC8p.js";import{A as fe,b as ge,X as ve,Y as Ne,c as ye}from"./AreaChart-Dk8yhTIN.js";import"./index-TAemdWJe.js";import"./index-5WLq0AmM.js";const be=[{day:"Mon",apiCalls:1200,users:45},{day:"Tue",apiCalls:1800,users:52},{day:"Wed",apiCalls:2400,users:58},{day:"Thu",apiCalls:2100,users:61},{day:"Fri",apiCalls:2800,users:65},{day:"Sat",apiCalls:1500,users:42},{day:"Sun",apiCalls:1200,users:38}],w=Date.now(),we=[{id:1,action:"User Login",user:"john@example.com",timestamp:new Date(w-120*1e3).toISOString(),status:"success"},{id:2,action:"API Key Created",user:"admin",timestamp:new Date(w-900*1e3).toISOString(),status:"success"},{id:3,action:"Password Reset",user:"jane@example.com",timestamp:new Date(w-3600*1e3).toISOString(),status:"success"},{id:4,action:"Failed Login",user:"unknown",timestamp:new Date(w-7200*1e3).toISOString(),status:"error"}];function $e(){const{id:C}=J({from:"/tenants/$id"}),[s,k]=m.useState(null),[$,E]=m.useState(!0),[i,r]=m.useState(null),[T,I]=m.useState(!1),P=Z(),L=j(_),M=j(q),z=j(Q),H=j(ee);m.useEffect(()=>{(async()=>{try{const c=await L({data:{tenantId:C}});k(c)}catch{d.error("Failed to load tenant details")}finally{E(!1)}})()},[C]);const A=async()=>{if(!(!s||!i)){if(!s.id){d.error("Tenant ID is missing");return}I(!0);try{switch(i){case"suspend":await M({data:{tenantId:s.id}}),d.success("Tenant suspended");break;case"activate":await z({data:{tenantId:s.id}}),d.success("Tenant activated");break;case"delete":await H({data:{tenantId:s.id}}),d.success("Tenant deleted"),window.location.href="/tenants";return}const t=await L({data:{tenantId:C}});k(t)}catch{d.error(`Failed to ${i} tenant`)}finally{I(!1),r(null)}}},U={active:{label:"Active",variant:"success",icon:K},suspended:{label:"Suspended",variant:"warning",icon:b},inactive:{label:"Inactive",variant:"destructive",icon:b}};if($)return e.jsxs("div",{className:"space-y-6",children:[e.jsx(D,{className:"h-8 w-48"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[...Array(4)].map((t,c)=>e.jsx(D,{variant:"card"},c))}),e.jsx(D,{variant:"card",className:"h-96"})]});if(!s)return e.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[e.jsx(b,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("h2",{className:"text-xl font-semibold",children:"Tenant not found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"The tenant you're looking for doesn't exist"}),e.jsx(x,{asChild:!0,children:e.jsx(se,{to:"/tenants",children:"Back to Tenants"})})]});const Y=s.status??"inactive",l=U[Y]||U.inactive,V=l.icon,o=s.plan??"unknown",O=o==="unknown"?"Unknown":o.charAt(0).toUpperCase()+o.slice(1),W=s.createdAt?te(s.createdAt):"—",F=s.createdAt?R(s.createdAt):"—",X=s.updatedAt?R(s.updatedAt):F;return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ae,{title:s.name??"Tenant",description:s.slug??"—",breadcrumbs:[{label:"Tenants",href:"/tenants"},{label:s.name??"Tenant"}],actions:e.jsxs("div",{className:"flex items-center gap-2",children:[s.status==="active"?e.jsxs(x,{variant:"outline",onClick:()=>r("suspend"),children:[e.jsx(oe,{className:"mr-2 h-4 w-4"}),"Suspend"]}):e.jsxs(x,{variant:"outline",onClick:()=>r("activate"),children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),"Activate"]}),e.jsxs(x,{variant:"destructive",onClick:()=>r("delete"),children:[e.jsx(xe,{className:"mr-2 h-4 w-4"}),"Delete"]})]})}),e.jsx(a,{className:p("border-l-4",s.status==="active"?"border-l-green-500":"border-l-amber-500"),children:e.jsxs(n,{className:"flex items-center justify-between py-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:p("p-2 rounded-full",s.status==="active"?"bg-green-500/10":"bg-amber-500/10"),children:e.jsx(V,{className:p("h-5 w-5",s.status==="active"?"text-green-600":"text-amber-600")})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:l.label}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.status==="active"?"All services operational":"Tenant access restricted"})]})]}),e.jsx(v,{variant:l.variant,size:"lg",children:l.label})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(f,{title:"Total Users",value:g(s.usage?.currentUsers??0),icon:e.jsx(ne,{className:"h-5 w-5"}),color:"blue"}),e.jsx(f,{title:"Plan",value:O,icon:e.jsx(re,{className:"h-5 w-5"}),color:"purple"}),e.jsx(f,{title:"Created",value:W,icon:e.jsx(ue,{className:"h-5 w-5"}),color:"green"}),e.jsx(f,{title:"API Calls (24h)",value:g(2450),trend:{value:12,isPositive:!0},icon:e.jsx(he,{className:"h-5 w-5"}),color:"amber"})]}),e.jsxs(ce,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(de,{children:[e.jsx(N,{value:"overview",children:"Overview"}),e.jsx(N,{value:"usage",children:"Usage"}),e.jsx(N,{value:"activity",children:"Activity"}),e.jsx(N,{value:"settings",children:"Settings"})]}),e.jsx(y,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(a,{children:[e.jsx(u,{children:e.jsx(h,{children:"Tenant Details"})}),e.jsx(n,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Tenant ID"}),e.jsx("p",{className:"font-medium font-mono text-sm",children:s.id??"—"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Slug"}),e.jsx("p",{className:"font-medium",children:s.slug??"—"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Plan"}),e.jsx(v,{variant:o==="enterprise"?"warning":o==="pro"?"success":"default",children:O})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsx(v,{variant:l.variant,children:l.label})]}),s.customDomain&&e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Custom Domain"}),e.jsx("p",{className:"font-medium",children:s.customDomain})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Created"}),e.jsx("p",{className:"font-medium",children:F})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last Updated"}),e.jsx("p",{className:"font-medium",children:X})]})]})})]}),e.jsxs(a,{children:[e.jsx(u,{children:e.jsx(h,{children:"Owner Information"})}),e.jsx(n,{className:"space-y-4",children:s.owner?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(G,{className:"h-6 w-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.owner.name||"Unknown"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.owner.email??"unknown"})]})]}),e.jsxs("div",{className:"pt-4 border-t space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Email Verified"}),e.jsx(v,{variant:"success",children:"Yes"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Last Login"}),e.jsx("span",{children:"2 hours ago"})]})]})]}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(G,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No owner assigned"})]})})]})]})}),e.jsxs(y,{value:"usage",className:"space-y-6",children:[e.jsxs(a,{children:[e.jsxs(u,{children:[e.jsx(h,{children:"API Usage (Last 7 Days)"}),e.jsx(B,{children:"Daily API calls and active users"})]}),e.jsx(n,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(je,{width:"100%",height:"100%",children:e.jsxs(fe,{data:be,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorApi",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]})}),e.jsx(ge,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),e.jsx(ve,{dataKey:"day",stroke:"#64748b",fontSize:12}),e.jsx(Ne,{stroke:"#64748b",fontSize:12}),e.jsx(pe,{}),e.jsx(ye,{type:"monotone",dataKey:"apiCalls",stroke:"#6366f1",strokeWidth:2,fillOpacity:1,fill:"url(#colorApi)",name:"API Calls"})]})})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(a,{children:e.jsxs(n,{className:"pt-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"API Calls (This Month)"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:g(45200)}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"↑ 12% from last month"})]})}),e.jsx(a,{children:e.jsxs(n,{className:"pt-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Storage Used"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:"2.4 GB"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"of 10 GB limit"})]})}),e.jsx(a,{children:e.jsxs(n,{className:"pt-6",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Sessions"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:g(156)}),e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"↑ 5% from yesterday"})]})})]})]}),e.jsx(y,{value:"activity",className:"space-y-6",children:e.jsxs(a,{children:[e.jsx(u,{children:e.jsx(h,{children:"Recent Activity"})}),e.jsx(n,{children:e.jsx("div",{className:"space-y-4",children:we.map((t,c)=>e.jsxs(ie.div,{initial:P?!1:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:P?{duration:0}:{delay:c*.05},className:"flex items-start gap-4 p-3 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsx("div",{className:p("p-2 rounded-full shrink-0",t.status==="success"&&"bg-green-500/10 text-green-600",t.status==="error"&&"bg-red-500/10 text-red-600"),children:t.status==="success"?e.jsx(K,{className:"h-4 w-4"}):e.jsx(b,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium",children:t.action}),e.jsx("p",{className:"text-sm text-muted-foreground",children:t.user})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:e.jsx("span",{title:t.timestamp,children:le(t.timestamp)})})]},t.id))})})]})}),e.jsx(y,{value:"settings",className:"space-y-6",children:e.jsxs(a,{children:[e.jsxs(u,{children:[e.jsx(h,{children:"Danger Zone"}),e.jsx(B,{children:"Destructive actions for this tenant"})]}),e.jsx(n,{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between p-4 border border-destructive/20 rounded-lg bg-destructive/5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-destructive",children:"Delete Tenant"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Permanently delete this tenant and all associated data"})]}),e.jsx(x,{variant:"destructive",onClick:()=>r("delete"),children:"Delete"})]})})]})})]}),e.jsx(S,{isOpen:i==="suspend",onClose:()=>r(null),onConfirm:A,title:"Suspend Tenant",description:`Are you sure you want to suspend "${s.name}"? This will prevent users from accessing the tenant.`,confirmText:"Suspend",variant:"destructive",isLoading:T}),e.jsx(S,{isOpen:i==="activate",onClose:()=>r(null),onConfirm:A,title:"Activate Tenant",description:`Are you sure you want to activate "${s.name}"?`,confirmText:"Activate",isLoading:T}),e.jsx(S,{isOpen:i==="delete",onClose:()=>r(null),onConfirm:A,title:"Delete Tenant",description:`Are you sure you want to delete "${s.name}"? This action cannot be undone.`,confirmText:"Delete",variant:"destructive",isLoading:T})]})}export{$e as component};
