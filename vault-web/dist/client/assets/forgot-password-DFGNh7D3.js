import{c as N,j as e,G as v,b as n,J as w,m as i,ai as h}from"./main-BdAAzOp_.js";import{I as C}from"./Input-DmXcK8Ek.js";import{C as x,d as p,a as b,b as k,c as S}from"./Card-BgwA5byp.js";import{A as P,a as I}from"./Alert-DT3fX0Ix.js";import{u as R}from"./useForm-D0kRy4nt.js";import{u as A,H as E,a as F,i as L}from"./HostedLayout-C9ABfqpe.js";import{C as B}from"./circle-check-big-BtZ3JG_-.js";import{A as f}from"./arrow-left-BSUvyDQr.js";import{C as H}from"./circle-alert-DITzmtt1.js";import{M}from"./mail-nvpjyHZd.js";const W=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],_=N("key-round",W);function Q(){const l=A();return e.jsx(E,{searchParams:new URLSearchParams(window.location.search),children:e.jsx(q,{searchParams:l})})}function q({searchParams:l}){const{config:j,tenantId:a}=F(),g=v(),[o,c]=n.useState(!1),[d,m]=n.useState(null),[y,u]=n.useState(!1),r=R({defaultValues:{email:""},onSubmit:async({value:s})=>{if(a){c(!0),m(null);try{await L({data:{email:s.email,tenantId:a}}),u(!0)}catch(t){m(t instanceof Error?t.message:"Failed to send reset email")}finally{c(!1)}}}});return!j||!a?null:y?e.jsx(x,{className:"shadow-elevated",children:e.jsx(p,{className:"pt-6",children:e.jsxs(w.div,{initial:g?!1:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center space-y-6 py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mx-auto",children:e.jsx(B,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Check your email"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["We've sent password reset instructions to ",e.jsx("strong",{children:r.getFieldValue("email")})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"The link will expire in 1 hour."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(i,{variant:"outline",fullWidth:!0,onClick:()=>u(!1),children:"Use a different email"}),e.jsx(h,{to:"/hosted/sign-in",search:{tenant_id:a},className:"block",children:e.jsxs(i,{variant:"ghost",fullWidth:!0,className:"gap-2",children:[e.jsx(f,{className:"h-4 w-4"}),"Back to Sign In"]})})]})]})})}):e.jsxs(x,{className:"shadow-elevated",children:[e.jsxs(b,{className:"space-y-1",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-2",children:e.jsx(_,{className:"h-6 w-6 text-primary"})}),e.jsx(k,{className:"text-2xl text-center",children:"Forgot password?"}),e.jsx(S,{className:"text-center",children:"Enter your email and we'll send you reset instructions"})]}),e.jsxs(p,{className:"space-y-4",children:[d&&e.jsxs(P,{variant:"destructive",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx(I,{children:d})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),s.stopPropagation(),r.handleSubmit()},className:"space-y-4",children:[e.jsx(r.Field,{name:"email",validators:{onChange:({value:s})=>{if(!s.trim())return"Email is required";if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s))return"Please enter a valid email"}},children:s=>e.jsx(C,{label:"Email",type:"email",placeholder:"you@example.com",value:s.state.value,onChange:t=>s.handleChange(t.target.value),onBlur:s.handleBlur,error:s.state.meta.isTouched?s.state.meta.errors[0]:void 0,leftIcon:e.jsx(M,{className:"h-4 w-4 text-muted-foreground"}),autoComplete:"email",autoCapitalize:"none",spellCheck:!1,required:!0,disabled:o})}),e.jsx(i,{type:"submit",fullWidth:!0,size:"lg",isLoading:o,children:"Send Reset Instructions"})]}),e.jsx("div",{className:"text-center pt-4 border-t",children:e.jsxs(h,{to:"/hosted/sign-in",search:{tenant_id:a},className:"inline-flex items-center gap-2 text-sm text-primary hover:underline",children:[e.jsx(f,{className:"h-4 w-4"}),"Back to Sign In"]})})]})]})}export{Q as component};
