import{az as c,aA as d,b as i,j as e,G as j,al as w,J as v,S}from"./main-BdAAzOp_.js";import{A as k,b as E,a as P}from"./Alert-DT3fX0Ix.js";import{C as T}from"./circle-alert-DITzmtt1.js";const O=c({method:"GET"}).handler(d("b92e70e16f392b15ad8c13d909d159d9277a8cea40153a7d152372a6e6cb34ef")),R=c({method:"POST"}).handler(d("4c4c6efb431cb3e467a6afa9464ba1af0373f18bc7d8f2ade3f6c4ca87cf460a")),A=c({method:"POST"}).handler(d("b5af2b0f5b3bfef7350538f597333f57e07504f99fcbe1b508ce57d168cbea67")),M=c({method:"POST"}).handler(d("622b84adf3123c35c2afd21c2c10615a5d4b9aa6a92ce81bccb916f5063294fb")),$=c({method:"POST"}).handler(d("d4155fbcbe598960305caaa0460634889bef4ebf55939027f3c8729a9d0d4a74")),V=c({method:"POST"}).handler(d("188843d40400af4d3cb0176f40ac9e09380c3c2ff8b3b2a63e04559317674d7c")),J=c({method:"POST"}).handler(d("1ca42db0c2d7c66f24cfff9cb30ebd7016860272f0cdd353442eeca73c52638f")),B=c({method:"POST"}).handler(d("bd9cff8d3b9ce4f4e6e3cfb824b074e8b83564e739d2a433cd2f837974ae3e65")),F=c({method:"POST"}).handler(d("eba5296fd712cc1e557da6d47dae2405baaa57df15aaf6c6a8d1953200ec95ca")),G=c({method:"GET"}).handler(d("e88a814d5a618e7e6649b95cd90ac8cada5115df1d3fdefefd210a9fc9369e17")),q=c({method:"POST"}).handler(d("00caa7e83ac2160de123c0d3a6fc13e26979131b0e5342bfa9e5f1f9ee4edd43")),D=c({method:"POST"}).handler(d("74b76322f432f923b54acfb6d8cdc556b05cbc5adeb8065dff2a0bf954828322"));c({method:"POST"}).handler(d("bffb1b1898bf60e6171ff14d1b3a016bba0489e0e74026e9ac02d0bf7c7f45ad"));const C=i.createContext(void 0);function _({children:t,searchParams:n}){const[a,r]=i.useState(null),[h,l]=i.useState(!0),[b,f]=i.useState(null),m=n.get("tenant_id"),x=n.get("redirect_url"),g=n.get("organization_id"),u=i.useCallback(async()=>{if(!m){f("Missing tenant_id parameter"),l(!1);return}try{l(!0),f(null);const o=await O({data:{tenantId:m}});r(o)}catch(o){f(o instanceof Error?o.message:"Failed to load configuration")}finally{l(!1)}},[m]);i.useEffect(()=>{u()},[u]),i.useEffect(()=>{if(a){if(a.primaryColor){document.documentElement.style.setProperty("--primary-color",a.primaryColor);const o="hosted-primary-color";let s=document.getElementById(o);s||(s=document.createElement("style"),s.id=o,document.head.appendChild(s)),s.textContent=`
        :host, :root {
          --color-primary: ${a.primaryColor};
        }
        .hosted-primary-bg { background-color: ${a.primaryColor} !important; }
        .hosted-primary-text { color: ${a.primaryColor} !important; }
        .hosted-primary-border { border-color: ${a.primaryColor} !important; }
      `}if(a.backgroundColor&&(document.body.style.backgroundColor=a.backgroundColor),a.customCss){const o="hosted-custom-css";let s=document.getElementById(o);s||(s=document.createElement("style"),s.id=o,document.head.appendChild(s)),s.textContent=a.customCss}if(a.customJs){const o="hosted-custom-js",s=document.getElementById(o);s&&s.remove();const y=document.createElement("script");y.id=o,y.textContent=a.customJs,document.body.appendChild(y)}if(a.faviconUrl){const o=document.querySelector('link[rel="icon"]');o&&(o.href=a.faviconUrl)}return()=>{document.documentElement.style.removeProperty("--primary-color"),document.body.style.backgroundColor=""}}},[a]);const p={config:a,isLoading:h,error:b,tenantId:m,redirectUrl:x,organizationId:g,refetch:u};return e.jsx(C.Provider,{value:p,children:t})}function N(){const t=i.useContext(C);if(t===void 0)throw new Error("useHostedConfig must be used within a HostedConfigProvider");return t}function K(){if(typeof window>"u")return{tenant_id:""};const t=new URLSearchParams(window.location.search);return{tenant_id:t.get("tenant_id")||"",redirect_url:t.get("redirect_url")||void 0,oauth_callback:t.get("oauth_callback")||void 0,organization_id:t.get("organization_id")||void 0,error:t.get("error")||void 0,message:t.get("message")||void 0}}function Q({children:t,searchParams:n,title:a,description:r}){return e.jsx(_,{searchParams:n,children:e.jsx(U,{title:a,description:r,children:t})})}function U({children:t,title:n,description:a}){const{config:r,isLoading:h,error:l,tenantId:b}=N(),f=j(),[m,x]=i.useState(!1);if(i.useEffect(()=>{x(!0)},[]),h)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted p-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(w,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Loading..."})]})});if(l||!b)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs(k,{variant:"destructive",children:[e.jsx(T,{className:"h-4 w-4"}),e.jsx(E,{children:"Configuration Error"}),e.jsx(P,{children:l||"Missing tenant_id parameter. Please check your URL and try again."})]})})});const g=r?.companyName||"Vault",u=n||r?.signInTitle||`Sign in to ${g}`,p=a||"Secure authentication powered by Vault";return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-background via-background to-muted",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-1/2 -right-1/2 w-full h-full rounded-full blur-3xl opacity-30",style:{backgroundColor:r?.primaryColor?`${r.primaryColor}20`:"hsl(var(--primary) / 0.05)"}}),e.jsx("div",{className:"absolute -bottom-1/2 -left-1/2 w-full h-full rounded-full blur-3xl opacity-30",style:{backgroundColor:r?.primaryColor?`${r.primaryColor}10`:"hsl(var(--secondary) / 0.05)"}})]}),e.jsx("header",{className:"relative z-10 w-full p-4 sm:p-6",children:e.jsx("div",{className:"max-w-md mx-auto flex items-center justify-center",children:e.jsx(I,{})})}),e.jsx("main",{className:"relative z-10 flex-1 flex items-center justify-center p-4 sm:p-6",children:e.jsx(v.div,{initial:f?!1:{opacity:0,y:20},animate:{opacity:1,y:0},transition:f?{duration:0}:{duration:.5},className:"w-full max-w-md",children:m&&e.jsxs(e.Fragment,{children:[(n||a)&&e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:u}),e.jsx("p",{className:"text-muted-foreground mt-1",children:p})]}),t]})})}),e.jsx("footer",{className:"relative z-10 w-full p-4 sm:p-6",children:e.jsxs("div",{className:"max-w-md mx-auto text-center",children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Secured by"," ",e.jsx("a",{href:"https://vault.dev",target:"_blank",rel:"noopener noreferrer",className:"hover:text-foreground transition-colors",children:"Vault"})]}),(r?.termsUrl||r?.privacyUrl)&&e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-2",children:[r.termsUrl&&e.jsx("a",{href:r.termsUrl,className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:"Terms"}),r.privacyUrl&&e.jsx("a",{href:r.privacyUrl,className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:"Privacy"})]})]})})]})}function I(){const{config:t}=N(),n=j();return t?.logoUrl?e.jsxs(v.div,{initial:n?!1:{scale:.8},animate:{scale:1},transition:n?{duration:0}:{delay:.2,type:"spring"},className:"flex items-center gap-3",children:[e.jsx("img",{src:t.logoUrl,alt:t.companyName,className:"h-12 w-auto object-contain"}),e.jsx("span",{className:"text-xl font-semibold",children:t.companyName})]}):e.jsxs(v.div,{initial:n?!1:{scale:.8},animate:{scale:1},transition:n?{duration:0}:{delay:.2,type:"spring"},className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl flex items-center justify-center shadow-lg",style:{backgroundColor:t?.primaryColor||"hsl(var(--primary))"},children:e.jsx(S,{className:"h-7 w-7 text-white"})}),e.jsx("span",{className:"text-xl font-semibold",children:t?.companyName||"Vault"})]})}export{Q as H,N as a,A as b,M as c,R as d,V as e,$ as f,F as g,B as h,J as i,G as j,q as k,D as l,K as u};
