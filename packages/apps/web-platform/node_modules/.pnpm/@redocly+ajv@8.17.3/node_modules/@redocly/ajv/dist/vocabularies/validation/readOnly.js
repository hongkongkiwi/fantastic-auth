"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const codegen_1 = require("../../compile/codegen");
const names_1 = require("../../compile/names");
const error = {
    message: ({ params }) => (0, codegen_1.str) `must NOT be present in ${params.mode || "this context"}${params.location ? (0, codegen_1.str) ` (${params.location})` : ""}`,
    params: ({ params }) => (0, codegen_1._) `{mode: ${params.mode}, location: ${params.location}}`,
};
const def = {
    keyword: "readOnly",
    schemaType: "boolean",
    error,
    code(cxt) {
        if (cxt.schema !== true)
            return;
        const mode = (0, codegen_1._) `(${names_1.default.this} && ${names_1.default.this}.oas ? ${names_1.default.this}.oas.mode : undefined)`;
        const location = (0, codegen_1._) `(${names_1.default.this} && ${names_1.default.this}.oas ? ${names_1.default.this}.oas.location : undefined)`;
        cxt.setParams({ mode, location });
        cxt.fail((0, codegen_1._) `typeof ${names_1.default.this} == "object" && ${names_1.default.this} && ${names_1.default.this}.oas && ${names_1.default.this}.oas.mode === "request"`);
    },
};
exports.default = def;
//# sourceMappingURL=readOnly.js.map