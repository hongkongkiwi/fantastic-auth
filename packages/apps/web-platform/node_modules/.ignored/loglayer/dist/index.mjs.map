{"version":3,"sources":["../src/types/plugins.types.ts","../src/types/common.types.ts","../src/LogBuilder.ts","../src/plugins/PluginManager.ts","../src/LogLayer.ts","../src/MockLogBuilder.ts","../src/MockLogLayer.ts"],"sourcesContent":["import type { LogLevel, MessageDataType } from \"./common.types\";\n\nexport interface PluginBeforeDataOutParams {\n  /**\n   * Log level of the data\n   */\n  logLevel: LogLevel;\n  /**\n   * The object containing metadata / context / error data. This\n   * is `undefined` if there is no object with data.\n   */\n  data?: Record<string, any>;\n}\n\nexport type PluginBeforeDataOutFn = (params: PluginBeforeDataOutParams) => Record<string, any> | null | undefined;\n\nexport interface PluginShouldSendToLoggerParams {\n  /**\n   * Message data that is copied from the original.\n   */\n  messages: any[];\n  /**\n   * Log level of the message\n   */\n  logLevel: LogLevel;\n  /**\n   * The object containing metadata / context / error data. This\n   * is `undefined` if there is no object with data.\n   */\n  data?: Record<string, any>;\n}\n\nexport type PluginShouldSendToLoggerFn = (params: PluginShouldSendToLoggerParams) => boolean;\n\nexport interface PluginBeforeMessageOutParams {\n  /**\n   * Log level of the message\n   */\n  logLevel: LogLevel;\n  /**\n   * Message data that is copied from the original.\n   */\n  messages: any[];\n}\n\nexport type PluginBeforeMessageOutFn = (params: PluginBeforeMessageOutParams) => any[];\n\nexport type PluginOnMetadataCalledFn = (metadata: Record<string, any>) => Record<string, any> | null | undefined;\n\nexport interface LogLayerPlugin {\n  /**\n   * Unique identifier for the plugin. Used for selectively disabling / enabling\n   * and removing the plugin.\n   */\n  id?: string;\n  /**\n   * If true, the plugin will skip execution\n   */\n  disabled?: boolean;\n\n  /**\n   * Called after the assembly of the data object that contains\n   * the metadata / context / error data before being sent to the destination logging\n   * library.\n   *\n   * - The shape of `data` varies depending on your `fieldName` configuration\n   * for metadata / context / error. The metadata / context / error data is a *shallow* clone.\n   * - If data was not found for assembly, `undefined` is used as the `data` input.\n   * - You can also create your own object and return it to be sent to the logging library.\n   *\n   * @returns [Object] The object to be sent to the destination logging\n   * library or null / undefined to not pass an object through.\n   */\n  onBeforeDataOut?(params: PluginBeforeDataOutParams): Record<string, any> | null | undefined;\n\n  /**\n   * Called after `onBeforeDataOut` and before `shouldSendToLogger`.\n   * This allows you to modify the message data before it is sent to the destination logging library.\n   *\n   * @returns [Array] The message data to be sent to the destination logging library.\n   */\n  onBeforeMessageOut?(params: PluginBeforeMessageOutParams): any[];\n\n  /**\n   * Called before the data is sent to the logger. Return false to omit sending\n   * to the logger. Useful for isolating specific log messages for debugging /\n   * troubleshooting.\n   *\n   * If there are multiple plugins with shouldSendToLogger defined, the\n   * first plugin to return false will stop the data from being sent to the\n   * logger.\n   *\n   * @returns boolean If true, sends data to the logger, if false does not.\n   */\n  shouldSendToLogger?(params: PluginShouldSendToLoggerParams): boolean;\n  /**\n   * Called when withMetadata() or metadataOnly() is called. This allows you to modify the metadata before it is sent to the destination logging library.\n   *\n   * The metadata is a *shallow* clone of the metadata input.\n   *\n   * If null is returned, then no metadata will be sent to the destination logging library.\n   *\n   * In multiple plugins, the modified metadata will be passed through each plugin in the order they are added.\n   *\n   * @returns [Object] The metadata object to be sent to the destination logging library.\n   */\n  onMetadataCalled?: (metadata: Record<string, any>) => Record<string, any> | null | undefined;\n}\n\n/**\n * List of plugin callbacks that can be called by the plugin manager.\n */\nexport enum PluginCallbackType {\n  onBeforeDataOut = \"onBeforeDataOut\",\n  shouldSendToLogger = \"shouldSendToLogger\",\n  onMetadataCalled = \"onMetadataCalled\",\n  onBeforeMessageOut = \"onBeforeMessageOut\",\n}\n","export enum LogLevel {\n  info = \"info\",\n  warn = \"warn\",\n  error = \"error\",\n  debug = \"debug\",\n  trace = \"trace\",\n  fatal = \"fatal\",\n}\n\n/**\n * Specifies the type of logging library used.\n */\nexport enum LoggerType {\n  BUNYAN = \"bunyan\",\n  CONSOLA = \"consola\",\n  CONSOLE = \"console\",\n  ELECTRON_LOG = \"electronLog\",\n  LOG4JS_NODE = \"log4js-node\",\n  PINO = \"pino\",\n  ROARR = \"roarr\",\n  SIGNALE = \"signale\",\n  WINSTON = \"winston\",\n  OTHER = \"other\",\n  DATADOG_BROWSER_LOGS = \"datadog-browser\",\n}\n\nexport type MessageDataType = string | number | null | undefined;\nexport type ErrorDataType = any;\n","import type { LogLayer } from \"./LogLayer\";\nimport type { PluginManager } from \"./plugins/PluginManager\";\nimport {\n  type ErrorDataType,\n  type ILogBuilder,\n  type LoggerLibrary,\n  type MessageDataType,\n  PluginCallbackType,\n} from \"./types\";\nimport { LogLevel } from \"./types\";\n\n/**\n * A class that contains methods to specify log metadata and an error and assembles\n * it together to form a data object that can be passed into the logger.\n */\nexport class LogBuilder<ExternalLogger extends LoggerLibrary = LoggerLibrary, ErrorType extends Error = ErrorDataType>\n  implements ILogBuilder<ErrorType>\n{\n  private err: ErrorType | null;\n  private metadata: Record<string, any>;\n  private structuredLogger: LogLayer<ExternalLogger, ErrorType>;\n  private hasMetadata: boolean;\n  private pluginManager: PluginManager;\n\n  constructor(structuredLogger: LogLayer<ExternalLogger, ErrorType>) {\n    this.err = null;\n    this.metadata = {};\n    this.structuredLogger = structuredLogger;\n    this.hasMetadata = false;\n    this.pluginManager = structuredLogger[\"pluginManager\"];\n  }\n\n  /**\n   * Adds metadata to the current log entry\n   */\n  withMetadata(metadata: Record<string, any>) {\n    const {\n      pluginManager,\n      structuredLogger: {\n        _config: { consoleDebug },\n      },\n    } = this;\n\n    let data: Record<string, any> | null = metadata;\n\n    if (pluginManager.hasPlugins(PluginCallbackType.onMetadataCalled)) {\n      data = pluginManager.runOnMetadataCalled(metadata);\n\n      if (!data) {\n        if (consoleDebug) {\n          console.debug(\"[LogLayer] Metadata was dropped due to plugin returning falsy value.\");\n        }\n\n        return this;\n      }\n    }\n\n    this.metadata = {\n      ...this.metadata,\n      ...data,\n    };\n\n    this.hasMetadata = true;\n\n    return this;\n  }\n\n  /**\n   * Adds an error to the current log entry\n   */\n  withError(error: ErrorType) {\n    this.err = error;\n    return this;\n  }\n\n  /**\n   * Sends a log message to the logging library under an info log level.\n   *\n   * The logging library may or may not support multiple message parameters and only\n   * the first parameter would be used.\n   */\n  info(...messages: MessageDataType[]) {\n    this.structuredLogger._formatMessage(messages);\n    this.formatLog(LogLevel.info, messages);\n  }\n\n  /**\n   * Sends a log message to the logging library under the warn log level\n   *\n   * The logging library may or may not support multiple message parameters and only\n   * the first parameter would be used.\n   */\n  warn(...messages: MessageDataType[]) {\n    this.structuredLogger._formatMessage(messages);\n    this.formatLog(LogLevel.warn, messages);\n  }\n\n  /**\n   * Sends a log message to the logging library under the error log level\n   *\n   * The logging library may or may not support multiple message parameters and only\n   * the first parameter would be used.\n   */\n  error(...messages: MessageDataType[]) {\n    this.structuredLogger._formatMessage(messages);\n    this.formatLog(LogLevel.error, messages);\n  }\n\n  /**\n   * Sends a log message to the logging library under the debug log level\n   *\n   * The logging library may or may not support multiple message parameters and only\n   * the first parameter would be used.\n   */\n  debug(...messages: MessageDataType[]) {\n    this.structuredLogger._formatMessage(messages);\n    this.formatLog(LogLevel.debug, messages);\n  }\n\n  /**\n   * Sends a log message to the logging library under the trace log level\n   *\n   * The logging library may or may not support multiple message parameters and only\n   * the first parameter would be used.\n   */\n  trace(...messages: MessageDataType[]) {\n    this.structuredLogger._formatMessage(messages);\n    this.formatLog(LogLevel.trace, messages);\n  }\n\n  /**\n   * Sends a log message to the logging library under the fatal log level\n   *\n   * The logging library may or may not support multiple message parameters and only\n   * the first parameter would be used.\n   */\n  fatal(...messages: MessageDataType[]) {\n    this.structuredLogger._formatMessage(messages);\n    this.formatLog(LogLevel.fatal, messages);\n  }\n\n  /**\n   * All logging inputs are dropped and stops sending logs to the logging library.\n   */\n  disableLogging() {\n    this.structuredLogger._config.enabled = false;\n    return this;\n  }\n\n  /**\n   * Enable sending logs to the logging library.\n   */\n  enableLogging() {\n    this.structuredLogger._config.enabled = true;\n    return this;\n  }\n\n  private formatLog(logLevel: LogLevel, params: any[]) {\n    const { error: errConfig, muteMetadata } = this.structuredLogger._config;\n\n    const hasData = (muteMetadata ? false : this.hasMetadata) || !!this.err;\n\n    const data = {\n      ...this.metadata,\n    };\n\n    if (this.err && errConfig.fieldName) {\n      data[errConfig.fieldName] = errConfig.serializer ? errConfig.serializer(this.err) : this.err;\n    }\n\n    this.structuredLogger._formatLog({ logLevel, params, data: hasData ? data : null });\n  }\n}\n","import {\n  type LogLayerPlugin,\n  type MessageDataType,\n  type PluginBeforeDataOutParams,\n  type PluginBeforeMessageOutParams,\n  PluginCallbackType,\n  type PluginShouldSendToLoggerParams,\n} from \"../types\";\n\nconst CALLBACK_LIST = [\n  PluginCallbackType.onBeforeDataOut,\n  PluginCallbackType.onMetadataCalled,\n  PluginCallbackType.shouldSendToLogger,\n  PluginCallbackType.onBeforeMessageOut,\n];\n\ninterface LogLayerPluginWithTimestamp extends LogLayerPlugin {\n  registeredAt: number;\n}\n\nexport class PluginManager<Data extends Record<string, any> = Record<string, any>> {\n  private idToPlugin: Record<string, LogLayerPluginWithTimestamp>;\n  // Indexes for each plugin type\n  private onBeforeDataOut: Array<string> = [];\n  private shouldSendToLogger: Array<string> = [];\n  private onMetadataCalled: Array<string> = [];\n  private onBeforeMessageOut: Array<string> = [];\n\n  constructor(plugins: Array<LogLayerPlugin>) {\n    this.idToPlugin = {};\n    this.mapPlugins(plugins);\n    this.indexPlugins();\n  }\n\n  private mapPlugins(plugins: Array<LogLayerPlugin>) {\n    for (const plugin of plugins) {\n      if (!plugin.id) {\n        plugin.id = new Date().getTime().toString() + Math.random().toString();\n      }\n\n      if (this.idToPlugin[plugin.id]) {\n        throw new Error(`[LogLayer] Plugin with id ${plugin.id} already exists.`);\n      }\n\n      plugin[\"registeredAt\"] = new Date().getTime();\n      this.idToPlugin[plugin.id] = plugin as LogLayerPluginWithTimestamp;\n    }\n  }\n\n  private indexPlugins() {\n    this.onBeforeDataOut = [];\n    this.shouldSendToLogger = [];\n    this.onMetadataCalled = [];\n    this.onBeforeMessageOut = [];\n\n    const pluginList = Object.values(this.idToPlugin).sort((a, b) => a.registeredAt - b.registeredAt);\n\n    for (const plugin of pluginList) {\n      if (plugin.disabled) {\n        return;\n      }\n\n      for (const callback of CALLBACK_LIST) {\n        // If the callback is defined, add the plugin id to the callback list\n        if (plugin[callback] && plugin.id) {\n          this[callback].push(plugin.id);\n        }\n      }\n    }\n  }\n\n  hasPlugins(callbackType: PluginCallbackType) {\n    return this[callbackType].length > 0;\n  }\n\n  countPlugins(callbackType?: PluginCallbackType) {\n    if (callbackType) {\n      return this[callbackType].length;\n    }\n\n    return Object.keys(this.idToPlugin).length;\n  }\n\n  addPlugins(plugins: Array<LogLayerPlugin>) {\n    this.mapPlugins(plugins);\n    this.indexPlugins();\n  }\n\n  enablePlugin(id: string) {\n    const plugin = this.idToPlugin[id];\n\n    if (plugin) {\n      plugin.disabled = false;\n    }\n\n    this.indexPlugins();\n  }\n\n  disablePlugin(id: string) {\n    const plugin = this.idToPlugin[id];\n\n    if (plugin) {\n      plugin.disabled = true;\n    }\n\n    this.indexPlugins();\n  }\n\n  removePlugin(id: string) {\n    delete this.idToPlugin[id];\n    this.indexPlugins();\n  }\n\n  /**\n   * Runs plugins that defines onBeforeDataOut.\n   */\n  runOnBeforeDataOut(params: PluginBeforeDataOutParams): Record<string, any> | undefined {\n    const initialData = { ...params }; // Make a shallow copy of params to avoid direct modification\n\n    for (const pluginId of this.onBeforeDataOut) {\n      const plugin = this.idToPlugin[pluginId];\n\n      if (plugin.onBeforeDataOut) {\n        const result = plugin.onBeforeDataOut({\n          data: initialData.data,\n          logLevel: initialData.logLevel,\n        });\n\n        if (result) {\n          if (!initialData.data) {\n            initialData.data = {};\n          }\n\n          // Mutate initialData.data directly instead of spreading it repeatedly\n          Object.assign(initialData.data, result);\n        }\n      }\n    }\n\n    return initialData.data;\n  }\n\n  /**\n   * Runs plugins that define shouldSendToLogger. Any plugin that returns false will prevent the message from being sent to the logger.\n   */\n  runShouldSendToLogger(params: PluginShouldSendToLoggerParams) {\n    return !this.shouldSendToLogger.some((pluginId) => {\n      const plugin = this.idToPlugin[pluginId];\n\n      // Return the negation of 'shouldSendToLogger' because 'some' will stop on true,\n      // and we stop on an explicit false return value from 'shouldSendToLogger'.\n      return !plugin.shouldSendToLogger!(params);\n    });\n  }\n\n  /**\n   * Runs plugins that define onMetadataCalled.\n   */\n  runOnMetadataCalled(metadata: Record<string, any>): Record<string, any> | null {\n    // Create a shallow copy of metadata to avoid direct modification\n    let data: Record<string, any> = {\n      ...metadata,\n    };\n\n    for (const pluginId of this.onMetadataCalled) {\n      const plugin = this.idToPlugin[pluginId];\n\n      const result = plugin.onMetadataCalled!(data);\n\n      if (result) {\n        data = result;\n      } else {\n        return null;\n      }\n    }\n\n    return data;\n  }\n\n  runOnBeforeMessageOut(params: PluginBeforeMessageOutParams): MessageDataType[] {\n    let messages = [...params.messages];\n\n    for (const pluginId of this.onBeforeMessageOut) {\n      const plugin = this.idToPlugin[pluginId];\n\n      const result = plugin.onBeforeMessageOut!({\n        messages: messages,\n        logLevel: params.logLevel,\n      });\n\n      if (result) {\n        messages = result;\n      }\n    }\n\n    return messages;\n  }\n}\n","import { LogBuilder } from \"./LogBuilder\";\nimport { PluginManager } from \"./plugins/PluginManager\";\nimport {\n  type ErrorDataType,\n  type ErrorOnlyOpts,\n  type ILogLayer,\n  type LogLayerConfig,\n  type LogLayerContextConfig,\n  type LogLayerErrorConfig,\n  type LogLayerMetadataConfig,\n  type LogLayerPlugin,\n  LogLevel,\n  type LoggerLibrary,\n  LoggerType,\n  type MessageDataType,\n  PluginCallbackType,\n} from \"./types\";\n\ninterface FormatLogParams {\n  logLevel: LogLevel;\n  params?: any[];\n  data?: Record<string, any> | null;\n}\n\nexport interface LogLayerInternalConfig<ErrorType> {\n  enabled: boolean;\n  consoleDebug?: boolean;\n  error: LogLayerErrorConfig<ErrorType>;\n  metadata: LogLayerMetadataConfig;\n  context: LogLayerContextConfig;\n  prefix?: string;\n  muteContext?: boolean;\n  muteMetadata?: boolean;\n}\n\n/**\n * Wraps around a logging framework to provide convenience methods that allow\n * developers to programmatically specify their errors and metadata along with\n * a message in a consistent fashion.\n */\nexport class LogLayer<ExternalLogger extends LoggerLibrary = LoggerLibrary, ErrorType extends Error = ErrorDataType>\n  implements ILogLayer<ExternalLogger, ErrorType>\n{\n  private loggerInstance: LoggerLibrary;\n  private loggerType: LoggerType;\n  private context: Record<string, any>;\n  private hasContext: boolean;\n  private pluginManager: PluginManager;\n\n  _config: LogLayerInternalConfig<ErrorType>;\n\n  constructor({\n    enabled,\n    logger,\n    error,\n    context,\n    metadata,\n    plugins,\n    consoleDebug,\n    prefix,\n    muteMetadata,\n    muteContext,\n  }: LogLayerConfig<ErrorType>) {\n    this.loggerInstance = logger.instance;\n    this.loggerType = logger?.type || LoggerType.OTHER;\n\n    this.context = {};\n    this.hasContext = false;\n    this._config = {\n      enabled: enabled ?? true,\n      consoleDebug: consoleDebug ?? false,\n      error: error || {},\n      context: context || {},\n      metadata: metadata || {},\n      prefix: prefix || \"\",\n      muteContext,\n      muteMetadata,\n    };\n\n    this.pluginManager = new PluginManager(plugins || []);\n\n    if (!this._config.error.fieldName) {\n      this._config.error.fieldName = \"err\";\n    }\n\n    if (!this._config.error.copyMsgOnOnlyError) {\n      this._config.error.copyMsgOnOnlyError = false;\n    }\n  }\n\n  /**\n   * Calls child() and sets the prefix to be included with every log message.\n   */\n  withPrefix(prefix: string): LogLayer<ExternalLogger, ErrorType> {\n    const logger = this.child();\n    logger._config.prefix = prefix;\n\n    return logger;\n  }\n\n  /**\n   * Appends context data which will be included with\n   * every log entry.\n   */\n  withContext(context: Record<string, any>): LogLayer<ExternalLogger, ErrorType> {\n    this.context = {\n      ...this.context,\n      ...context,\n    };\n\n    this.hasContext = true;\n\n    return this;\n  }\n\n  /**\n   * Returns the context used for the logger\n   */\n  getContext() {\n    return this.context;\n  }\n\n  /**\n   * Add additional plugins.\n   */\n  addPlugins(plugins: Array<LogLayerPlugin>) {\n    this.pluginManager.addPlugins(plugins);\n  }\n\n  /**\n   * Enables a plugin by id.\n   */\n  enablePlugin(id: string) {\n    this.pluginManager.enablePlugin(id);\n  }\n\n  /**\n   * Disables a plugin by id.\n   */\n  disablePlugin(id: string) {\n    this.pluginManager.disablePlugin(id);\n  }\n\n  /**\n   * Removes a plugin by id.\n   */\n  removePlugin(id: string) {\n    this.pluginManager.removePlugin(id);\n  }\n\n  /**\n   * Specifies metadata to include with the log message\n   */\n  withMetadata(metadata: Record<string, any>) {\n    return new LogBuilder<ExternalLogger, ErrorType>(this).withMetadata(metadata);\n  }\n\n  /**\n   * Specifies an Error to include with the log message\n   */\n  withError(error: ErrorType) {\n    return new LogBuilder<ExternalLogger, ErrorType>(this).withError(error);\n  }\n\n  /**\n   * Creates a new instance of LogLayer but with the initialization\n   * configuration and context copied over.\n   */\n  child() {\n    if (this.hasContext) {\n      return new LogLayer<ExternalLogger, ErrorType>({\n        ...this._config,\n        logger: {\n          instance: this.loggerInstance,\n          type: this.loggerType,\n        },\n      })\n        .withContext({\n          ...this.context,\n        })\n        .withPluginManager(this.pluginManager);\n    }\n\n    return new LogLayer<ExternalLogger, ErrorType>({\n      ...this._config,\n      logger: {\n        instance: this.loggerInstance,\n        type: this.loggerType,\n      },\n    }).withPluginManager(this.pluginManager);\n  }\n\n  protected withPluginManager(pluginManager: PluginManager) {\n    this.pluginManager = pluginManager;\n    return this;\n  }\n\n  /**\n   * Logs only the error object without a log message\n   */\n  errorOnly(error: ErrorType, opts?: ErrorOnlyOpts) {\n    const { error: errConfig } = this._config;\n\n    const formatLogConf: FormatLogParams = {\n      logLevel: opts?.logLevel || LogLevel.error,\n      data: {\n        [errConfig.fieldName!]: errConfig.serializer ? errConfig.serializer(error) : error,\n      },\n    };\n\n    if (this.loggerType === LoggerType.ROARR) {\n      // Roarr needs a message defined\n      formatLogConf.params = [\"\"];\n    }\n\n    // Copy the error message as the log message\n    if (((errConfig.copyMsgOnOnlyError && opts?.copyMsg !== false) || opts?.copyMsg === true) && error.message) {\n      formatLogConf.params = [error.message];\n    }\n\n    this._formatLog(formatLogConf);\n  }\n\n  /**\n   * Logs only metadata without a log message\n   */\n  metadataOnly(metadata: Record<string, any>, logLevel: LogLevel = LogLevel.info) {\n    const { muteMetadata, consoleDebug } = this._config;\n\n    if (muteMetadata) {\n      return;\n    }\n\n    let data: Record<string, any> | null = metadata;\n\n    if (this.pluginManager.hasPlugins(PluginCallbackType.onMetadataCalled)) {\n      data = this.pluginManager.runOnMetadataCalled(metadata);\n\n      if (!data) {\n        if (consoleDebug) {\n          console.debug(\"[LogLayer] Metadata was dropped due to plugin returning falsy value.\");\n        }\n\n        return;\n      }\n    }\n\n    const config: FormatLogParams = {\n      logLevel,\n      data,\n    };\n\n    if (this.loggerType === LoggerType.ROARR) {\n      // Roarr needs a message defined\n      config.params = [\"\"];\n    }\n\n    this._formatLog(config);\n  }\n\n  /**\n   * Sends a log message to the logging library under an info log level.\n   *\n   * The logging library may or may not support multiple message parameters and only\n   * the first parameter would be used.\n   */\n  info(...messages: MessageDataType[]) {\n    this._formatMessage(messages);\n    this._formatLog({ logLevel: LogLevel.info, params: messages });\n  }\n\n  /**\n   * Sends a log message to the logging library under the warn log level\n   *\n   * The logging library may or may not support multiple message parameters and only\n   * the first parameter would be used.\n   */\n  warn(...messages: MessageDataType[]) {\n    this._formatMessage(messages);\n    this._formatLog({ logLevel: LogLevel.warn, params: messages });\n  }\n\n  /**\n   * Sends a log message to the logging library under the error log level\n   *\n   * The logging library may or may not support multiple message parameters and only\n   * the first parameter would be used.\n   */\n  error(...messages: MessageDataType[]) {\n    this._formatMessage(messages);\n    this._formatLog({ logLevel: LogLevel.error, params: messages });\n  }\n\n  /**\n   * Sends a log message to the logging library under the debug log level\n   *\n   * The logging library may or may not support multiple message parameters and only\n   * the first parameter would be used.\n   */\n  debug(...messages: MessageDataType[]) {\n    this._formatMessage(messages);\n    this._formatLog({ logLevel: LogLevel.debug, params: messages });\n  }\n\n  /**\n   * Sends a log message to the logging library under the trace log level\n   *\n   * The logging library may or may not support multiple message parameters and only\n   * the first parameter would be used.\n   */\n  trace(...messages: MessageDataType[]) {\n    this._formatMessage(messages);\n    this._formatLog({ logLevel: LogLevel.trace, params: messages });\n  }\n\n  /**\n   * Sends a log message to the logging library under the fatal log level\n   *\n   * The logging library may or may not support multiple message parameters and only\n   * the first parameter would be used.\n   */\n  fatal(...messages: MessageDataType[]) {\n    this._formatMessage(messages);\n    this._formatLog({ logLevel: LogLevel.fatal, params: messages });\n  }\n\n  /**\n   * All logging inputs are dropped and stops sending logs to the logging library.\n   */\n  disableLogging() {\n    this._config.enabled = false;\n    return this;\n  }\n\n  /**\n   * Enable sending logs to the logging library.\n   */\n  enableLogging() {\n    this._config.enabled = true;\n    return this;\n  }\n\n  /**\n   * Returns the underlying log instance\n   */\n  getLoggerInstance(): ExternalLogger {\n    return this.loggerInstance as ExternalLogger;\n  }\n\n  /**\n   * Disables inclusion of context data in the print\n   */\n  muteContext(): ILogLayer<ExternalLogger, ErrorType> {\n    this._config.muteContext = true;\n    return this;\n  }\n\n  /**\n   * Enables inclusion of context data in the print\n   */\n  unMuteContext(): ILogLayer<ExternalLogger, ErrorType> {\n    this._config.muteContext = false;\n    return this;\n  }\n\n  /**\n   * Disables inclusion of metadata in the print\n   */\n  muteMetadata(): ILogLayer<ExternalLogger, ErrorType> {\n    this._config.muteMetadata = true;\n    return this;\n  }\n\n  /**\n   * Enables inclusion of metadata in the print\n   */\n  unMuteMetadata(): ILogLayer<ExternalLogger, ErrorType> {\n    this._config.muteMetadata = false;\n    return this;\n  }\n\n  private formatContext() {\n    const { context: contextCfg, muteContext } = this._config;\n\n    if (this.hasContext && !muteContext) {\n      if (contextCfg.fieldName) {\n        return {\n          [contextCfg.fieldName]: {\n            ...this.context,\n          },\n        };\n      }\n\n      return {\n        ...this.context,\n      };\n    }\n\n    return {};\n  }\n\n  private formatMetadata(data: Record<string, any> | null = null) {\n    const { metadata: metadataCfg, muteMetadata } = this._config;\n\n    if (data && !muteMetadata) {\n      if (metadataCfg.fieldName) {\n        return {\n          [metadataCfg.fieldName]: {\n            ...data,\n          },\n        };\n      }\n\n      return {\n        ...data,\n      };\n    }\n\n    return {};\n  }\n\n  _formatMessage(messages: MessageDataType[] = []) {\n    const { prefix } = this._config;\n\n    if (prefix && typeof messages[0] === \"string\") {\n      messages[0] = `${prefix} ${messages[0]}`;\n    }\n  }\n\n  _formatLog({ logLevel, params = [], data = null }: FormatLogParams) {\n    const { enabled, muteContext, context, metadata, consoleDebug } = this._config;\n\n    if (!enabled) {\n      return;\n    }\n\n    const hasObjData = !!data || (muteContext ? false : this.hasContext);\n\n    let d: Record<string, any> | undefined | null = {};\n\n    if (hasObjData) {\n      // Field names for context and metadata is the same, merge the metadata into the same field name\n      if (context.fieldName && context.fieldName === metadata.fieldName) {\n        const contextData = this.formatContext()[context.fieldName];\n        const updatedMetadata = this.formatMetadata(data)[metadata.fieldName];\n\n        d = {\n          [context.fieldName]: {\n            ...contextData,\n            ...updatedMetadata,\n          },\n        };\n      } else {\n        d = {\n          ...this.formatContext(),\n          ...this.formatMetadata(data),\n        };\n      }\n    }\n\n    if (this.pluginManager.hasPlugins(PluginCallbackType.onBeforeDataOut)) {\n      d = this.pluginManager.runOnBeforeDataOut({\n        data: hasObjData ? d : undefined,\n        logLevel,\n      });\n    }\n\n    if (this.pluginManager.hasPlugins(PluginCallbackType.onBeforeMessageOut)) {\n      params = this.pluginManager.runOnBeforeMessageOut({\n        messages: [...params],\n        logLevel,\n      });\n    }\n\n    if (this.pluginManager.hasPlugins(PluginCallbackType.shouldSendToLogger)) {\n      const shouldSend = this.pluginManager.runShouldSendToLogger({\n        messages: [...params],\n        data: hasObjData ? d : undefined,\n        logLevel,\n      });\n\n      if (!shouldSend) {\n        return;\n      }\n    }\n\n    if (d && hasObjData) {\n      switch (this.loggerType) {\n        case LoggerType.CONSOLA:\n        case LoggerType.ELECTRON_LOG:\n        case LoggerType.LOG4JS_NODE:\n        case LoggerType.SIGNALE:\n        case LoggerType.WINSTON:\n        case LoggerType.DATADOG_BROWSER_LOGS:\n          // library wants the data object to be the last parameter\n          params.push(d);\n          break;\n        default:\n          // put object data as the first parameter\n          params.unshift(d);\n      }\n    }\n\n    switch (logLevel) {\n      case LogLevel.info:\n        if (consoleDebug) {\n          console.info(...params);\n        }\n        this.loggerInstance.info(...params);\n        break;\n      case LogLevel.warn:\n        if (consoleDebug) {\n          console.warn(...params);\n        }\n        this.loggerInstance.warn(...params);\n        break;\n      case LogLevel.error:\n        if (consoleDebug) {\n          console.error(...params);\n        }\n        this.loggerInstance.error(...params);\n        break;\n      case LogLevel.trace:\n        if (consoleDebug) {\n          console.debug(...params);\n        }\n\n        // These loggers do not have a trace type\n        if (\n          this.loggerType === LoggerType.WINSTON ||\n          this.loggerType === LoggerType.SIGNALE ||\n          this.loggerType === LoggerType.DATADOG_BROWSER_LOGS\n        ) {\n          this.loggerInstance.debug(...params);\n        } else if (this.loggerInstance.trace) {\n          this.loggerInstance.trace(...params);\n        } else {\n          this.loggerInstance.debug(...params);\n        }\n        break;\n      case LogLevel.debug:\n        if (consoleDebug) {\n          console.debug(...params);\n        }\n        this.loggerInstance.debug(...params);\n        break;\n      case LogLevel.fatal:\n        if (consoleDebug) {\n          console.debug(...params);\n        }\n\n        if (\n          this.loggerType === LoggerType.WINSTON ||\n          this.loggerType === LoggerType.ELECTRON_LOG ||\n          this.loggerType === LoggerType.CONSOLE ||\n          this.loggerType === LoggerType.DATADOG_BROWSER_LOGS\n        ) {\n          this.loggerInstance.error(...params);\n        } else if (this.loggerInstance.fatal) {\n          this.loggerInstance.fatal(...params);\n        } else {\n          this.loggerInstance.error(...params);\n        }\n        break;\n      default:\n        if (consoleDebug) {\n          console.log(...params);\n        }\n        // @ts-ignore\n        this.loggerInstance[logLevel](...params);\n    }\n  }\n}\n","/* eslint @typescript-eslint/no-empty-function: 0 */\n/* istanbul ignore file */\n\nimport type { ErrorDataType, ILogBuilder } from \"./types\";\n\nimport type { MessageDataType } from \"./types/common.types\";\n\nexport class MockLogBuilder<ErrorType = Error> implements ILogBuilder<ErrorType> {\n  debug(...messages: MessageDataType[]): void {}\n\n  error(...messages: MessageDataType[]): void {}\n\n  info(...messages: MessageDataType[]): void {}\n\n  trace(...messages: MessageDataType[]): void {}\n\n  warn(...messages: MessageDataType[]): void {}\n\n  fatal(...messages: MessageDataType[]): void {}\n\n  enableLogging() {\n    return this;\n  }\n\n  disableLogging() {\n    return this;\n  }\n\n  withMetadata(metadata: Record<string, any>): ILogBuilder<ErrorType> {\n    return this;\n  }\n\n  withError(error: ErrorType): ILogBuilder<ErrorType> {\n    return this;\n  }\n}\n","/* eslint @typescript-eslint/no-empty-function: 0 */\n/* istanbul ignore file */\n\nimport { MockLogBuilder } from \"./MockLogBuilder\";\nimport type { ErrorOnlyOpts, ILogBuilder, ILogLayer, LogLayerPlugin } from \"./types\";\nimport type { LogLevel, MessageDataType } from \"./types\";\n\nexport class MockLogLayer<ErrorType = Error> implements ILogLayer<any, ErrorType> {\n  info(...messages: MessageDataType[]): void {}\n  warn(...messages: MessageDataType[]): void {}\n  error(...messages: MessageDataType[]): void {}\n  debug(...messages: MessageDataType[]): void {}\n  trace(...messages: MessageDataType[]): void {}\n  fatal(...messages: MessageDataType[]): void {}\n\n  getLoggerInstance() {}\n\n  errorOnly(error: ErrorType, opts?: ErrorOnlyOpts): void {}\n\n  metadataOnly(metadata: Record<string, any>, logLevel: LogLevel): void {}\n\n  addPlugins(plugins: Array<LogLayerPlugin>) {}\n\n  removePlugin(id: string) {}\n\n  enablePlugin(id: string) {}\n\n  disablePlugin(id: string) {}\n\n  withPrefix(prefix: string) {\n    return new MockLogLayer() as ILogLayer<any, ErrorType>;\n  }\n\n  withContext(context: Record<string, any>): ILogLayer<any, ErrorType> {\n    return this as ILogLayer<any, ErrorType>;\n  }\n\n  withError(error: ErrorType): ILogBuilder<ErrorType> {\n    return new MockLogBuilder();\n  }\n\n  withMetadata(metadata: Record<string, any>): ILogBuilder<ErrorType> {\n    return new MockLogBuilder();\n  }\n\n  getContext(): Record<string, any> {\n    return {};\n  }\n\n  enableLogging() {\n    return this;\n  }\n\n  disableLogging() {\n    return this;\n  }\n\n  child() {\n    return new MockLogLayer() as ILogLayer<any, ErrorType>;\n  }\n\n  muteContext() {\n    return this;\n  }\n\n  unMuteContext() {\n    return this;\n  }\n\n  muteMetadata() {\n    return this;\n  }\n\n  unMuteMetadata() {\n    return this;\n  }\n}\n"],"mappings":"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","names":["PluginCallbackType","LogLevel","LoggerType"]}