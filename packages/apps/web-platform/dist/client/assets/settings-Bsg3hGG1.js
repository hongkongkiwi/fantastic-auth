import{r as x,j as e,bu as E,bv as q,bw as V,bx as D,v as W,m as B,by as F,C as X,F as Y,a1 as Z,$ as O,D as J,E as _,u as ee,Q as se,X as te,x as K,a9 as ie,bz as ae}from"./vendor-DTXcECKj.js";import{e as v,b as le,P as ne,d as S,B as C,t as T}from"./main-D_qbY1gz.js";import{C as A,a as P,b as R,c as L,d as k}from"./Card-ovhP7agJ.js";import{S as re}from"./Switch-C_TaIxIx.js";import{I as z}from"./Input-CvXUl1_l.js";import{g as oe}from"./internal-api-CvC1OOUg.js";import{u as de,m as N,A as ce}from"./vendor-motion-DirI8ZVJ.js";import"./vendor-sonner-CauEFWQC.js";import"./vendor-sentry-DWdptYQI.js";import"./logger-BML-1mmb.js";const $=x.forwardRef(({className:i,label:o,description:u,showValue:m=!0,valueFormatter:a=c=>String(c),min:d=0,max:p=100,step:g=1,value:y,defaultValue:h,...j},l)=>{const c=y??h??[d],n=Array.isArray(c)?c[0]:c;return e.jsxs("div",{className:v("w-full space-y-3",i),children:[(o||m)&&e.jsxs("div",{className:"flex items-center justify-between",children:[o&&e.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:o}),m&&e.jsx("span",{className:"text-sm text-muted-foreground font-mono",children:a(n)})]}),e.jsxs(E,{ref:l,min:d,max:p,step:g,value:y,defaultValue:h,className:v("relative flex w-full touch-none select-none items-center",i),...j,children:[e.jsx(q,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(V,{className:"absolute h-full bg-primary"})}),e.jsx(D,{className:v("block h-5 w-5 rounded-full border-2 border-primary bg-background","ring-offset-background transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50","active:scale-110 transition-transform")})]}),u&&e.jsx("p",{className:"text-xs text-muted-foreground",children:u}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:a(d)}),e.jsx("span",{children:a(p)})]})]})});$.displayName=E.displayName;const ue=x.forwardRef(({className:i,label:o,description:u,showValue:m=!0,valueFormatter:a=n=>String(n),min:d=0,max:p=100,step:g=1,value:y,defaultValue:h,onValueChange:j,...l},c)=>{const n=y??h??[d,p];return e.jsxs("div",{className:v("w-full space-y-3",i),children:[(o||m)&&e.jsxs("div",{className:"flex items-center justify-between",children:[o&&e.jsx("label",{className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:o}),m&&e.jsxs("span",{className:"text-sm text-muted-foreground font-mono",children:[a(n[0])," - ",a(n[1])]})]}),e.jsxs(E,{ref:c,min:d,max:p,step:g,value:n,onValueChange:j,className:v("relative flex w-full touch-none select-none items-center",i),...l,children:[e.jsx(q,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(V,{className:"absolute h-full bg-primary"})}),e.jsx(D,{className:v("block h-5 w-5 rounded-full border-2 border-primary bg-background","ring-offset-background transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50","active:scale-110 transition-transform")}),e.jsx(D,{className:v("block h-5 w-5 rounded-full border-2 border-primary bg-background","ring-offset-background transition-colors","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50","active:scale-110 transition-transform")})]}),u&&e.jsx("p",{className:"text-xs text-muted-foreground",children:u}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:a(d)}),e.jsx("span",{children:a(p)})]})]})});ue.displayName="RangeSlider";const I=[{id:"general",title:"General",description:"Basic platform configuration",icon:W,color:"blue",settings:[{id:"siteName",label:"Site Name",type:"input",value:"Vault Admin"},{id:"siteUrl",label:"Site URL",type:"input",value:"https://vault.example.com"},{id:"timezone",label:"Default Timezone",type:"select",value:"UTC"},{id:"language",label:"Default Language",type:"select",value:"en"}]},{id:"authentication",title:"Authentication",description:"Login methods and security",icon:B,color:"green",href:"/settings/security",settings:[{id:"mfa",label:"Require MFA",type:"toggle",value:!1},{id:"magicLink",label:"Enable Magic Link",type:"toggle",value:!0},{id:"oauth",label:"Social Login",type:"toggle",value:!0},{id:"sessionDuration",label:"Session Duration (hours)",type:"slider",value:24,min:1,max:168}]},{id:"email",title:"Email",description:"Email provider and templates",icon:F,color:"amber",settings:[{id:"provider",label:"Email Provider",type:"select",value:"smtp"},{id:"fromEmail",label:"From Email",type:"input",value:"noreply@vault.example.com"},{id:"templates",label:"Custom Templates",type:"toggle",value:!1}]},{id:"billing",title:"Billing",description:"Payment and subscription settings",icon:X,color:"purple",settings:[{id:"enabled",label:"Enable Billing",type:"toggle",value:!0},{id:"provider",label:"Payment Provider",type:"select",value:"stripe"},{id:"trialDays",label:"Trial Period (days)",type:"slider",value:14,min:0,max:30}]},{id:"notifications",title:"Notifications",description:"Alert preferences and channels",icon:Y,color:"rose",settings:[{id:"emailAlerts",label:"Email Alerts",type:"toggle",value:!0},{id:"slackAlerts",label:"Slack Integration",type:"toggle",value:!1},{id:"webhookAlerts",label:"Webhook Alerts",type:"toggle",value:!1}]},{id:"api",title:"API & Webhooks",description:"API keys and webhook endpoints",icon:Z,color:"indigo",href:"/settings/webhooks",settings:[{id:"rateLimit",label:"Rate Limit (requests/min)",type:"slider",value:60,min:10,max:1e3},{id:"cors",label:"CORS Origins",type:"input",value:"*"},{id:"apiVersion",label:"API Version",type:"select",value:"v1"}]},{id:"apiKeys",title:"API Keys",description:"Manage programmatic access keys",icon:O,color:"slate",href:"/settings/api-keys",settings:[{id:"apiKeyRotation",label:"Key Rotation (days)",type:"slider",value:90,min:30,max:365},{id:"apiKeyLimit",label:"Max Keys per Org",type:"slider",value:10,min:1,max:50}]},{id:"sso",title:"SSO & Integrations",description:"Configure SAML and OAuth providers",icon:B,color:"emerald",href:"/settings/sso",settings:[{id:"ssoRequired",label:"Require SSO",type:"toggle",value:!1},{id:"domainAllowlist",label:"Domain Allowlist",type:"input",value:"example.com"}]},{id:"security",title:"Security",description:"Advanced security settings",icon:J,color:"red",settings:[{id:"hibp",label:"Check Breached Passwords",type:"toggle",value:!0},{id:"geoip",label:"GeoIP Blocking",type:"toggle",value:!1},{id:"captcha",label:"CAPTCHA Protection",type:"toggle",value:!0},{id:"auditRetention",label:"Audit Log Retention (days)",type:"slider",value:90,min:30,max:365}]},{id:"analytics",title:"Analytics",description:"Usage tracking and insights",icon:_,color:"cyan",settings:[{id:"enabled",label:"Enable Analytics",type:"toggle",value:!0},{id:"provider",label:"Analytics Provider",type:"select",value:"posthog"},{id:"anonymize",label:"Anonymize IPs",type:"toggle",value:!0}]},{id:"system",title:"System",description:"Maintenance and advanced options",icon:ee,color:"slate",settings:[{id:"maintenance",label:"Maintenance Mode",type:"toggle",value:!1},{id:"debug",label:"Debug Mode",type:"toggle",value:!1},{id:"backups",label:"Auto Backups",type:"toggle",value:!0}]}];function Ne(){const[i,o]=x.useState(""),[u,m]=x.useState(null),[a,d]=x.useState({siteName:"Vault Admin",siteUrl:"https://vault.example.com",timezone:"UTC",language:"en",darkMode:!1,mfa:!1,magicLink:!0,oauth:!0,sessionDuration:24,emailProvider:"smtp",fromEmail:"noreply@vault.example.com",templates:!1,billingEnabled:!0,paymentProvider:"stripe",trialDays:14,emailAlerts:!0,slackAlerts:!1,webhookAlerts:!1,rateLimit:60,cors:"*",apiVersion:"v1",hibp:!0,geoip:!1,captcha:!0,auditRetention:90,analyticsEnabled:!0,analyticsProvider:"posthog",anonymize:!0,maintenance:!1,debug:!1,backups:!0}),[p,g]=x.useState(!1),[y,h]=x.useState(!1),{data:j}=le({queryKey:["ui-config"],queryFn:()=>oe()}),l=de(),c=j?.internalApiBaseUrl||"http://localhost:3000/api/v1/internal",n=j?.hasApiKey??!1,M=x.useMemo(()=>{if(!i.trim())return I;const s=i.toLowerCase();return I.filter(t=>t.title.toLowerCase().includes(s)||t.description.toLowerCase().includes(s)?!0:t.settings.some(r=>r.label.toLowerCase().includes(s)))},[i]),w=(s,t)=>{d(r=>({...r,[s]:t})),g(!0)},H=async()=>{h(!0);try{await new Promise(s=>setTimeout(s,1e3)),T.success("Settings saved successfully"),g(!1)}catch{T.error("Failed to save settings")}finally{h(!1)}},Q=s=>{const t=a[s.id];switch(s.type){case"toggle":return e.jsx(re,{checked:t,onCheckedChange:b=>w(s.id,b)});case"input":return e.jsx(z,{value:t,onChange:b=>w(s.id,b.target.value),className:"max-w-xs"});case"select":return e.jsxs("select",{value:t,onChange:b=>w(s.id,b.target.value),className:"rounded-md border border-input bg-background px-3 py-2 text-sm max-w-xs",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Spanish"}),e.jsx("option",{value:"fr",children:"French"}),e.jsx("option",{value:"de",children:"German"})]});case"slider":const r="min"in s&&typeof s.min=="number"?s.min:0,G="max"in s&&typeof s.max=="number"?s.max:100;return e.jsx("div",{className:"w-48",children:e.jsx($,{value:[t],onValueChange:([b])=>w(s.id,b),min:r,max:G,showValue:!0})});default:return null}},f=I.find(s=>s.id===u);return e.jsxs("div",{className:"space-y-6",children:[e.jsx(ne,{title:"Settings",description:"Configure your platform settings",breadcrumbs:[{label:"Settings"}]}),e.jsxs("div",{className:"relative",children:[e.jsx(se,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(z,{placeholder:"Search settings...",value:i,onChange:s=>o(s.target.value),className:"pl-10"}),i&&e.jsx("button",{type:"button",onClick:()=>o(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx(te,{className:"h-4 w-4 text-muted-foreground"})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Categories"}),M.map(s=>{const t=s.icon,r=u===s.id;return e.jsxs("button",{type:"button",onClick:()=>m(s.id),className:U("w-full flex items-center gap-3 p-3 rounded-lg text-left transition-colors",r?"bg-primary/10 text-primary":"hover:bg-muted"),children:[e.jsx("div",{className:U("p-2 rounded-lg",r?"bg-primary/20":"bg-muted"),children:e.jsx(t,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-sm",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:s.description})]}),r&&e.jsx(K,{className:"h-4 w-4"})]},s.id)})]}),e.jsxs("div",{className:"lg:col-span-3 space-y-6",children:[f?e.jsx(N.div,{initial:l?!1:{opacity:0,y:10},animate:{opacity:1,y:0},children:e.jsxs(A,{children:[e.jsx(P,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg bg-${f.color}-100`,children:e.jsx(f.icon,{className:`h-5 w-5 text-${f.color}-600`})}),e.jsxs("div",{children:[e.jsx(R,{children:f.title}),e.jsx(L,{children:f.description})]})]})}),e.jsx(k,{className:"space-y-6",children:f.settings.map(s=>e.jsxs("div",{className:"flex items-center justify-between py-3 border-b last:border-0",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.label}),s.type==="slider"&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Current: ",a[s.id],s.id.includes("Duration")&&" hours",s.id.includes("Retention")&&" days",s.id.includes("Limit")&&" requests/min",s.id.includes("trial")&&" days"]})]}),Q(s)]},s.id))})]})}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:M.map((s,t)=>{const r=s.icon;return e.jsx(N.div,{initial:l?!1:{opacity:0,y:20},animate:{opacity:1,y:0},transition:l?{duration:0}:{delay:t*.05},children:e.jsx(A,{className:"cursor-pointer hover:border-primary/50 transition-colors",onClick:()=>m(s.id),children:e.jsx(k,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`p-3 rounded-lg bg-${s.color}-100`,children:e.jsx(r,{className:`h-5 w-5 text-${s.color}-600`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold",children:s.title}),s.href&&e.jsx(S,{variant:"outline",className:"text-xs",children:"Page"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:s.description}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[s.settings.length," settings"]})]}),e.jsx(K,{className:"h-5 w-5 text-muted-foreground"})]})})})},s.id)})}),e.jsx(N.div,{initial:l?!1:{opacity:0,y:20},animate:{opacity:1,y:0},transition:l?{duration:0}:{delay:.3},children:e.jsxs(A,{children:[e.jsx(P,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/10",children:e.jsx(O,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx(R,{children:"API Configuration"}),e.jsx(L,{children:"Manage internal API settings"})]})]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-muted",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Internal API URL"}),e.jsx(S,{variant:"outline",children:"Configured"})]}),e.jsx("code",{className:"text-sm text-muted-foreground",children:c})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-muted",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"API Key Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:n?"Key configured":"No key set"})]}),e.jsx(S,{variant:n?"success":"warning",children:n?"Active":"Missing"})]})]})]})}),e.jsx(N.div,{initial:l?!1:{opacity:0,y:20},animate:{opacity:1,y:0},transition:l?{duration:0}:{delay:.4},children:e.jsxs(A,{className:"border-destructive/20",children:[e.jsx(P,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-destructive/10",children:e.jsx(ie,{className:"h-5 w-5 text-destructive"})}),e.jsxs("div",{children:[e.jsx(R,{className:"text-destructive",children:"Danger Zone"}),e.jsx(L,{children:"Destructive actions that cannot be undone"})]})]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-destructive/20 bg-destructive/5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-destructive",children:"Reset Platform"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Delete all tenant data and reset to factory defaults"})]}),e.jsx(C,{variant:"destructive",children:"Reset"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-destructive/20 bg-destructive/5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-destructive",children:"Clear Cache"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Clear all cached data and sessions"})]}),e.jsx(C,{variant:"outline",className:"border-destructive/50 text-destructive hover:bg-destructive/10",children:"Clear"})]})]})]})})]})]}),e.jsx(ce,{children:p&&e.jsx(N.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},exit:{opacity:0,y:50},className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50",children:e.jsxs("div",{className:"flex items-center gap-4 px-6 py-3 bg-background border rounded-full shadow-lg",children:[e.jsx("span",{className:"text-sm font-medium",children:"You have unsaved changes"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{variant:"ghost",size:"sm",onClick:()=>g(!1),children:"Discard"}),e.jsxs(C,{size:"sm",onClick:H,isLoading:y,children:[e.jsx(ae,{className:"mr-2 h-4 w-4"}),"Save Changes"]})]})]})})})]})}function U(...i){return i.filter(Boolean).join(" ")}export{Ne as component};
