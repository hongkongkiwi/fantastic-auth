import{r as a,j as e,bH as p,a7 as m,bD as h}from"./vendor-DTXcECKj.js";import{a as b,P as x,B as i,L as g,t as j,d as f,p as S}from"./main-D_qbY1gz.js";import{C as v}from"./Card-ovhP7agJ.js";import{D as w,a as D,b as y}from"./DataTable-B1vFbS0r.js";import{D as C,a as B,b as N,c as n}from"./DropdownMenu-DLlbKs3-.js";import{h as P}from"./internal-api-CvC1OOUg.js";import"./vendor-sonner-CauEFWQC.js";import"./vendor-motion-DirI8ZVJ.js";import"./vendor-sentry-DWdptYQI.js";import"./Input-CvXUl1_l.js";import"./logger-BML-1mmb.js";const E={active:{label:"Active",variant:"success"},past_due:{label:"Past Due",variant:"warning"},canceled:{label:"Canceled",variant:"destructive"},trialing:{label:"Trialing",variant:"default"}};function O(){const[c,o]=a.useState([]),[l,t]=a.useState(!0),d=b(P);a.useEffect(()=>{(async()=>{t(!0);try{const r=await d({data:{}});o(r.data||[])}catch{j.error("Failed to load subscriptions")}finally{t(!1)}})()},[]);const u=[{accessorKey:"tenantId",header:"Tenant",cell:({row:s})=>e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.getValue("tenantId")||"—"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.original.id??"—"})]})},{accessorKey:"plan",header:"Plan",cell:({getValue:s})=>e.jsx(f,{variant:s()==="enterprise"?"warning":s()==="pro"?"success":"default",children:s().charAt(0).toUpperCase()+s().slice(1)})},{accessorKey:"status",header:"Status",cell:D(E)},{accessorKey:"amount",header:"Amount",cell:({row:s})=>S(s.original.amount?.total??0)},{accessorKey:"currentPeriodEnd",header:"Renews",cell:y()},{id:"actions",header:"",cell:()=>e.jsxs(C,{children:[e.jsx(B,{asChild:!0,children:e.jsx(i,{variant:"ghost",size:"icon-sm","aria-label":"Open subscription actions",children:e.jsx(p,{className:"h-4 w-4"})})}),e.jsxs(N,{align:"end",children:[e.jsxs(n,{children:[e.jsx(m,{className:"mr-2 h-4 w-4"}),"View Invoices"]}),e.jsxs(n,{children:[e.jsx(h,{className:"mr-2 h-4 w-4"}),"Download Statement"]})]})]})}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx(x,{title:"Subscriptions",description:"Manage active subscriptions",breadcrumbs:[{label:"Billing",href:"/billing"},{label:"Subscriptions"}],actions:e.jsx(i,{variant:"outline",asChild:!0,children:e.jsx(g,{to:"/billing",children:"Back to Billing"})})}),e.jsx(v,{children:e.jsx(w,{columns:u,data:c,isLoading:l,searchable:!0,searchPlaceholder:"Search subscriptions…",pagination:!0,pageSize:10,exportable:!0,exportFileName:"subscriptions"})})]})}export{O as component};
