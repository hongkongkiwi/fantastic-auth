import{j as e,r as l,L as j,bz as g,W as y,bP as v,by as w}from"./vendor-DTXcECKj.js";import{g as N,B as d,j as b,l as C,L as h}from"./main-D_qbY1gz.js";import{C as k,d as E}from"./Card-ovhP7agJ.js";import{H as S,u as I,h as L}from"./HostedLayout-DYymfZHG.js";import{u as P,m}from"./vendor-motion-DirI8ZVJ.js";import"./vendor-sonner-CauEFWQC.js";import"./vendor-sentry-DWdptYQI.js";function _(){return e.jsx(S,{searchParams:new URLSearchParams(window.location.search),children:e.jsx(R,{})})}function R(){const x=N(),{config:a,tenantId:s}=I(),r=P(),[n,t]=l.useState("loading"),[f,c]=l.useState(null),i=new URLSearchParams(window.location.search).get("token");if(l.useEffect(()=>{if(!s||!i){t("error"),c(i?"Missing tenant ID":"Missing verification token");return}(async()=>{try{(await L({data:{token:i,tenantId:s}})).success?t("success"):(t("error"),c("Verification failed"))}catch(o){t("error"),c(o instanceof Error?o.message:"Invalid or expired verification link")}})()},[s,i]),!a||!s)return null;const p=()=>{const u=a.afterSignInUrl||"/hosted/sign-in";x({to:u,search:{tenant_id:s}})};return e.jsx(k,{className:"shadow-elevated",children:e.jsxs(E,{className:"pt-6",children:[n==="loading"&&e.jsxs(m.div,{initial:r?!1:{opacity:0},animate:{opacity:1},className:"text-center space-y-6 py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto",children:e.jsx(j,{className:"w-8 h-8 text-primary animate-spin"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Verifying your email..."}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Please wait while we verify your email address"})]})]}),n==="success"&&e.jsxs(m.div,{initial:r?!1:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center space-y-6 py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mx-auto",children:e.jsx(g,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Email verified!"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Your email has been successfully verified. You can now sign in to your account."})]}),e.jsx(d,{onClick:p,fullWidth:!0,rightIcon:e.jsx(y,{className:"h-4 w-4"}),children:"Continue to Sign In"})]}),n==="error"&&e.jsxs(m.div,{initial:r?!1:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center space-y-6 py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-destructive/10 rounded-full flex items-center justify-center mx-auto",children:e.jsx(v,{className:"w-8 h-8 text-destructive"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Verification failed"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:f||"The verification link is invalid or has expired."})]}),e.jsxs(b,{children:[e.jsx(w,{className:"h-4 w-4"}),e.jsx(C,{children:"Please request a new verification email or contact support if the problem persists."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(h,{to:"/hosted/sign-in",search:{tenant_id:s},className:"block",children:e.jsx(d,{fullWidth:!0,children:"Go to Sign In"})}),a.allowSignUp&&e.jsx(h,{to:"/hosted/sign-up",search:{tenant_id:s},className:"block",children:e.jsx(d,{variant:"outline",fullWidth:!0,children:"Create New Account"})})]})]})]})})}export{_ as component};
