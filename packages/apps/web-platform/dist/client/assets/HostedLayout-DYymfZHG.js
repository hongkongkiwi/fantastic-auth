import{r as i,j as e,L as N,bt as S,m as w}from"./vendor-DTXcECKj.js";import{Q as n,R as c,j as k,k as E,l as P}from"./main-D_qbY1gz.js";import{u as j,m as y}from"./vendor-motion-DirI8ZVJ.js";const T=n({method:"GET"}).handler(c("b92e70e16f392b15ad8c13d909d159d9277a8cea40153a7d152372a6e6cb34ef")),z=n({method:"POST"}).handler(c("4c4c6efb431cb3e467a6afa9464ba1af0373f18bc7d8f2ade3f6c4ca87cf460a")),M=n({method:"POST"}).handler(c("b5af2b0f5b3bfef7350538f597333f57e07504f99fcbe1b508ce57d168cbea67")),$=n({method:"POST"}).handler(c("622b84adf3123c35c2afd21c2c10615a5d4b9aa6a92ce81bccb916f5063294fb")),A=n({method:"POST"}).handler(c("d4155fbcbe598960305caaa0460634889bef4ebf55939027f3c8729a9d0d4a74")),_=n({method:"POST"}).handler(c("188843d40400af4d3cb0176f40ac9e09380c3c2ff8b3b2a63e04559317674d7c")),V=n({method:"POST"}).handler(c("1ca42db0c2d7c66f24cfff9cb30ebd7016860272f0cdd353442eeca73c52638f")),F=n({method:"POST"}).handler(c("bd9cff8d3b9ce4f4e6e3cfb824b074e8b83564e739d2a433cd2f837974ae3e65"));n({method:"POST"}).handler(c("eba5296fd712cc1e557da6d47dae2405baaa57df15aaf6c6a8d1953200ec95ca"));const q=n({method:"GET"}).handler(c("e88a814d5a618e7e6649b95cd90ac8cada5115df1d3fdefefd210a9fc9369e17")),B=n({method:"POST"}).handler(c("00caa7e83ac2160de123c0d3a6fc13e26979131b0e5342bfa9e5f1f9ee4edd43")),D=n({method:"POST"}).handler(c("74b76322f432f923b54acfb6d8cdc556b05cbc5adeb8065dff2a0bf954828322"));n({method:"POST"}).handler(c("bffb1b1898bf60e6171ff14d1b3a016bba0489e0e74026e9ac02d0bf7c7f45ad"));const v=i.createContext(void 0);function O({children:r,searchParams:o}){const[t,a]=i.useState(null),[h,l]=i.useState(!0),[x,f]=i.useState(null),m=o.get("tenant_id"),b=o.get("redirect_url"),p=o.get("organization_id"),u=i.useCallback(async()=>{if(!m){f("Missing tenant_id parameter"),l(!1);return}try{l(!0),f(null);const s=await T({data:{tenantId:m}});a(s)}catch(s){f(s instanceof Error?s.message:"Failed to load configuration")}finally{l(!1)}},[m]);i.useEffect(()=>{u()},[u]),i.useEffect(()=>{if(t){if(t.primaryColor){document.documentElement.style.setProperty("--primary-color",t.primaryColor);const s="hosted-primary-color";let d=document.getElementById(s);d||(d=document.createElement("style"),d.id=s,document.head.appendChild(d)),d.textContent=`
        :host, :root {
          --color-primary: ${t.primaryColor};
        }
        .hosted-primary-bg { background-color: ${t.primaryColor} !important; }
        .hosted-primary-text { color: ${t.primaryColor} !important; }
        .hosted-primary-border { border-color: ${t.primaryColor} !important; }
      `}if(t.backgroundColor&&(document.body.style.backgroundColor=t.backgroundColor),t.customCss){const s="hosted-custom-css";let d=document.getElementById(s);d||(d=document.createElement("style"),d.id=s,document.head.appendChild(d)),d.textContent=t.customCss}if(t.faviconUrl){const s=document.querySelector('link[rel="icon"]');s&&(s.href=t.faviconUrl)}return()=>{document.documentElement.style.removeProperty("--primary-color"),document.body.style.backgroundColor=""}}},[t]);const g={config:t,isLoading:h,error:x,tenantId:m,redirectUrl:b,organizationId:p,refetch:u};return e.jsx(v.Provider,{value:g,children:r})}function C(){const r=i.useContext(v);if(r===void 0)throw new Error("useHostedConfig must be used within a HostedConfigProvider");return r}function G({children:r,searchParams:o,title:t,description:a}){return e.jsx(O,{searchParams:o,children:e.jsx(L,{title:t,description:a,children:r})})}function L({children:r,title:o,description:t}){const{config:a,isLoading:h,error:l,tenantId:x}=C(),f=j(),[m,b]=i.useState(!1);if(i.useEffect(()=>{b(!0)},[]),h)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted p-4",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx(N,{className:"h-8 w-8 animate-spin text-primary"}),e.jsx("p",{className:"text-muted-foreground text-sm",children:"Loading..."})]})});if(l||!x)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-background to-muted p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs(k,{variant:"destructive",children:[e.jsx(S,{className:"h-4 w-4"}),e.jsx(E,{children:"Configuration Error"}),e.jsx(P,{children:l||"Missing tenant_id parameter. Please check your URL and try again."})]})})});const p=a?.companyName||"Vault",u=o||a?.signInTitle||`Sign in to ${p}`,g=t||"Secure authentication powered by Vault";return e.jsxs("div",{className:"min-h-screen flex flex-col bg-gradient-to-br from-background via-background to-muted",children:[e.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-1/2 -right-1/2 w-full h-full rounded-full blur-3xl opacity-30",style:{backgroundColor:a?.primaryColor?`${a.primaryColor}20`:"hsl(var(--primary) / 0.05)"}}),e.jsx("div",{className:"absolute -bottom-1/2 -left-1/2 w-full h-full rounded-full blur-3xl opacity-30",style:{backgroundColor:a?.primaryColor?`${a.primaryColor}10`:"hsl(var(--secondary) / 0.05)"}})]}),e.jsx("header",{className:"relative z-10 w-full p-4 sm:p-6",children:e.jsx("div",{className:"max-w-md mx-auto flex items-center justify-center",children:e.jsx(U,{})})}),e.jsx("main",{className:"relative z-10 flex-1 flex items-center justify-center p-4 sm:p-6",children:e.jsx(y.div,{initial:f?!1:{opacity:0,y:20},animate:{opacity:1,y:0},transition:f?{duration:0}:{duration:.5},className:"w-full max-w-md",children:m&&e.jsxs(e.Fragment,{children:[(o||t)&&e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:u}),e.jsx("p",{className:"text-muted-foreground mt-1",children:g})]}),r]})})}),e.jsx("footer",{className:"relative z-10 w-full p-4 sm:p-6",children:e.jsxs("div",{className:"max-w-md mx-auto text-center",children:[e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Secured by"," ",e.jsx("a",{href:"https://vault.dev",target:"_blank",rel:"noopener noreferrer",className:"hover:text-foreground transition-colors",children:"Vault"})]}),(a?.termsUrl||a?.privacyUrl)&&e.jsxs("div",{className:"flex items-center justify-center gap-4 mt-2",children:[a.termsUrl&&e.jsx("a",{href:a.termsUrl,className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:"Terms"}),a.privacyUrl&&e.jsx("a",{href:a.privacyUrl,className:"text-xs text-muted-foreground hover:text-foreground transition-colors",children:"Privacy"})]})]})})]})}function U(){const{config:r}=C(),o=j();return r?.logoUrl?e.jsxs(y.div,{initial:o?!1:{scale:.8},animate:{scale:1},transition:o?{duration:0}:{delay:.2,type:"spring"},className:"flex items-center gap-3",children:[e.jsx("img",{src:r.logoUrl,alt:r.companyName,className:"h-12 w-auto object-contain"}),e.jsx("span",{className:"text-xl font-semibold",children:r.companyName})]}):e.jsxs(y.div,{initial:o?!1:{scale:.8},animate:{scale:1},transition:o?{duration:0}:{delay:.2,type:"spring"},className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-xl flex items-center justify-center shadow-lg",style:{backgroundColor:r?.primaryColor||"hsl(var(--primary))"},children:e.jsx(w,{className:"h-7 w-7 text-white"})}),e.jsx("span",{className:"text-xl font-semibold",children:r?.companyName||"Vault"})]})}export{G as H,M as a,$ as b,z as c,_ as d,A as e,V as f,q as g,F as h,B as i,D as j,C as u};
