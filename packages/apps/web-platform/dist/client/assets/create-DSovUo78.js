import{r as o,j as e,bO as k,a5 as f}from"./vendor-DTXcECKj.js";import{g as D,a as O,P,B as m,L as g,e as c,d as j,t as b}from"./main-D_qbY1gz.js";import{C as v,a as B,b as L,c as U,d as F}from"./Card-ovhP7agJ.js";import{I as l}from"./Input-CvXUl1_l.js";import{i as I}from"./internal-api-CvC1OOUg.js";import{u as q,m as A}from"./vendor-motion-DirI8ZVJ.js";import"./vendor-sonner-CauEFWQC.js";import"./vendor-sentry-DWdptYQI.js";import"./logger-BML-1mmb.js";const R=[{value:"free",label:"Free"},{value:"starter",label:"Starter"},{value:"pro",label:"Pro"},{value:"enterprise",label:"Enterprise"}];function W(){const N=D(),w=O(I),[y,u]=o.useState(!1),[t,x]=o.useState(1),[s,n]=o.useState({name:"",slug:"",plan:"starter",ownerEmail:"",ownerName:"",customDomain:""}),[d,C]=o.useState({}),p=q(),h=a=>{const r={};return a===1&&(s.name.trim()||(r.name="Tenant name is required"),s.slug.trim()?/^[a-z0-9-]+$/.test(s.slug)||(r.slug="Slug can only contain lowercase letters, numbers, and hyphens"):r.slug="Slug is required"),a===2&&s.ownerEmail&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.ownerEmail)&&(r.ownerEmail="Please enter a valid email"),C(r),Object.keys(r).length===0},S=()=>{h(t)&&x(t+1)},E=()=>{x(t-1)},T=async()=>{if(h(t)){u(!0);try{await w({data:{name:s.name,slug:s.slug,plan:s.plan,ownerEmail:s.ownerEmail||void 0,ownerName:s.ownerName||void 0,customDomain:s.customDomain||void 0}}),b.success("Tenant created successfully"),N({to:"/tenants"})}catch{b.error("Failed to create tenant")}finally{u(!1)}}},i=[{number:1,title:"Basic Info",description:"Tenant name and slug"},{number:2,title:"Plan",description:"Select subscription tier"},{number:3,title:"Owner",description:"Set up owner details"}];return e.jsxs("div",{className:"space-y-6 max-w-3xl",children:[e.jsx(P,{title:"Create Tenant",description:"Set up a new tenant on your platform",breadcrumbs:[{label:"Tenants",href:"/tenants"},{label:"Create"}],actions:e.jsx(m,{variant:"outline",asChild:!0,children:e.jsxs(g,{to:"/tenants",children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Back to Tenants"]})})}),e.jsx(v,{className:"p-6",children:e.jsx("div",{className:"flex items-center justify-between",children:i.map((a,r)=>e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:c("w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-colors",t>a.number&&"bg-green-500 text-white",t===a.number&&"bg-primary text-primary-foreground",t<a.number&&"bg-muted text-muted-foreground"),children:t>a.number?e.jsx(f,{className:"h-5 w-5"}):a.number}),e.jsxs("div",{className:"mt-2 text-center hidden sm:block",children:[e.jsx("p",{className:c("text-sm font-medium",t>=a.number?"text-foreground":"text-muted-foreground"),children:a.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:a.description})]})]}),r<i.length-1&&e.jsx("div",{className:c("w-24 h-0.5 mx-4 hidden sm:block",t>a.number?"bg-green-500":"bg-muted")})]},a.number))})}),e.jsx(A.div,{initial:p?!1:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:p?{duration:0}:{duration:.2},children:e.jsxs(v,{children:[e.jsxs(B,{children:[e.jsx(L,{children:i[t-1].title}),e.jsx(U,{children:i[t-1].description})]}),e.jsxs(F,{className:"space-y-6",children:[t===1&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(l,{label:"Tenant Name",placeholder:"Acme Corporation",value:s.name,onChange:a=>n({...s,name:a.target.value}),error:d.name,name:"tenantName",autoComplete:"off",required:!0}),e.jsx(l,{label:"Slug",placeholder:"acme-corp",value:s.slug,onChange:a=>n({...s,slug:a.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")}),error:d.slug,helperText:"Used in URLs and API calls. Lowercase letters, numbers, and hyphens only.",name:"tenantSlug",autoComplete:"off",required:!0}),e.jsx(l,{label:"Custom Domain (Optional)",type:"url",placeholder:"auth.acme.com",value:s.customDomain,onChange:a=>n({...s,customDomain:a.target.value}),name:"customDomain",autoComplete:"off"})]}),t===2&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("label",{className:"text-sm font-medium",children:"Select Plan"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:R.map(a=>e.jsxs("button",{type:"button",onClick:()=>n({...s,plan:a.value}),className:c("p-4 rounded-lg border-2 text-left transition-colors transition-shadow focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",s.plan===a.value?"border-primary bg-primary/5":"border-muted hover:border-muted-foreground/30"),"aria-pressed":s.plan===a.value,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(j,{variant:a.value==="enterprise"?"warning":a.value==="pro"?"success":"default",children:a.label}),s.plan===a.value&&e.jsx("div",{className:"h-5 w-5 rounded-full bg-primary flex items-center justify-center",children:e.jsx(f,{className:"h-3 w-3 text-primary-foreground"})})]}),e.jsxs("p",{className:"mt-2 text-sm text-muted-foreground",children:[a.value==="free"&&"Up to 100 users, basic features",a.value==="starter"&&"Up to 1,000 users, advanced features",a.value==="pro"&&"Up to 10,000 users, priority support",a.value==="enterprise"&&"Unlimited users, dedicated support"]})]},a.value))})]}),t===3&&e.jsxs("div",{className:"space-y-4",children:[e.jsx(l,{label:"Owner Name (Optional)",placeholder:"John Doe",value:s.ownerName,onChange:a=>n({...s,ownerName:a.target.value}),name:"ownerName",autoComplete:"off"}),e.jsx(l,{label:"Owner Email (Optional)",type:"email",placeholder:"john@example.com",value:s.ownerEmail,onChange:a=>n({...s,ownerEmail:a.target.value}),error:d.ownerEmail,name:"ownerEmail",autoComplete:"email",inputMode:"email",spellCheck:!1}),e.jsxs("div",{className:"mt-6 p-4 bg-muted rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Summary"}),e.jsxs("dl",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-muted-foreground",children:"Tenant Name"}),e.jsx("dd",{className:"font-medium",children:s.name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-muted-foreground",children:"Slug"}),e.jsx("dd",{className:"font-medium",children:s.slug})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-muted-foreground",children:"Plan"}),e.jsx("dd",{children:e.jsx(j,{variant:s.plan==="enterprise"?"warning":s.plan==="pro"?"success":"default",children:s.plan.charAt(0).toUpperCase()+s.plan.slice(1)})})]}),s.ownerName&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("dt",{className:"text-muted-foreground",children:"Owner"}),e.jsx("dd",{className:"font-medium",children:s.ownerName})]})]})]})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[t===1?e.jsx(m,{variant:"outline",asChild:!0,children:e.jsx(g,{to:"/tenants",children:"Cancel"})}):e.jsx(m,{variant:"outline",onClick:E,children:"Back"}),e.jsx(m,{onClick:t===3?T:S,isLoading:y,children:t===3?"Create Tenant":"Continue"})]})]})]})},t)]})}export{W as component};
