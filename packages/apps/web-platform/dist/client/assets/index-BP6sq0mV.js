import{r as i,j as e,bM as M,bN as B,bs as P,bt as F,a7 as c,bH as K,bD as L}from"./vendor-DTXcECKj.js";import{a as z,P as E,S as l,p as t,B as g,L as O,e as V,d as b,t as G}from"./main-D_qbY1gz.js";import{D as H,a as J,b as U}from"./DataTable-B1vFbS0r.js";import{C as r,a as o,b as d,c as u,d as m}from"./Card-ovhP7agJ.js";import{T as X,a as Y,b as x,c as h}from"./Tabs-B49fZEnE.js";import{D as $,a as W,b as _,c as f}from"./DropdownMenu-DLlbKs3-.js";import{h as q}from"./internal-api-CvC1OOUg.js";import{u as Q,m as Z}from"./vendor-motion-DirI8ZVJ.js";import{R as N,A as ee,C as y,X as w,Y as C,T as S,a as se,B as ae,b as te}from"./vendor-charts-CwKjLNYJ.js";import"./vendor-sonner-CauEFWQC.js";import"./vendor-sentry-DWdptYQI.js";import"./Input-CvXUl1_l.js";import"./logger-BML-1mmb.js";const re=[{month:"Jan",revenue:12500,target:12e3},{month:"Feb",revenue:14200,target:13e3},{month:"Mar",revenue:15800,target:14e3},{month:"Apr",revenue:17100,target:15e3},{month:"May",revenue:18900,target:16e3},{month:"Jun",revenue:21500,target:18e3}],ne={active:{label:"Active",variant:"success"},past_due:{label:"Past Due",variant:"warning"},canceled:{label:"Canceled",variant:"destructive"},trialing:{label:"Trialing",variant:"default"}};function be(){const[p,D]=i.useState([]),[T,j]=i.useState(!0),[A,R]=i.useState("overview"),v=Q(),k=z(q);i.useEffect(()=>{(async()=>{j(!0);try{const n=await k({data:{}});D(n.data||[])}catch{G.error("Failed to load subscriptions")}finally{j(!1)}})()},[]);const I=[{accessorKey:"tenantId",header:"Tenant",cell:({row:s})=>e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.getValue("tenantId")||"—"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.original.id??"—"})]})},{accessorKey:"plan",header:"Plan",cell:({getValue:s})=>e.jsx(b,{variant:s()==="enterprise"?"warning":s()==="pro"?"success":"default",children:s().charAt(0).toUpperCase()+s().slice(1)})},{accessorKey:"status",header:"Status",cell:J(ne)},{accessorKey:"amount",header:"Amount",cell:({row:s})=>t(s.original.amount?.total??0)},{accessorKey:"currentPeriodEnd",header:"Renews",cell:U()},{id:"actions",header:"",cell:()=>e.jsxs($,{children:[e.jsx(W,{asChild:!0,children:e.jsx(g,{variant:"ghost",size:"icon-sm","aria-label":"Open subscription actions",children:e.jsx(K,{className:"h-4 w-4"})})}),e.jsxs(_,{align:"end",children:[e.jsxs(f,{children:[e.jsx(c,{className:"mr-2 h-4 w-4"}),"View Invoices"]}),e.jsxs(f,{children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"Download Statement"]})]})]})}],a={mrr:21500,arr:258e3,growth:12.5,activeSubs:p.length||85,pastDue:3};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(E,{title:"Billing",description:"Manage subscriptions, invoices, and revenue",breadcrumbs:[{label:"Billing"}]}),e.jsxs(X,{value:A,onValueChange:R,className:"space-y-6",children:[e.jsxs(Y,{children:[e.jsx(x,{value:"overview",children:"Overview"}),e.jsx(x,{value:"subscriptions",children:"Subscriptions"}),e.jsx(x,{value:"invoices",children:"Invoices"})]}),e.jsxs(h,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(l,{title:"Monthly Recurring Revenue",value:t(a.mrr),trend:{value:a.growth,isPositive:!0},icon:e.jsx(M,{className:"h-5 w-5"}),color:"green"}),e.jsx(l,{title:"Annual Run Rate",value:t(a.arr),icon:e.jsx(B,{className:"h-5 w-5"}),color:"blue"}),e.jsx(l,{title:"Active Subscriptions",value:a.activeSubs,icon:e.jsx(P,{className:"h-5 w-5"}),color:"purple"}),e.jsx(l,{title:"Past Due",value:a.pastDue,icon:e.jsx(F,{className:"h-5 w-5"}),color:"rose"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(r,{children:[e.jsxs(o,{children:[e.jsx(d,{children:"Revenue Overview"}),e.jsx(u,{children:"Monthly recurring revenue vs target"})]}),e.jsx(m,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(N,{width:"100%",height:"100%",children:e.jsxs(ee,{data:re,children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorRevenue",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]})}),e.jsx(y,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),e.jsx(w,{dataKey:"month",stroke:"#64748b",fontSize:12}),e.jsx(C,{stroke:"#64748b",fontSize:12,tickFormatter:s=>`$${Number(s)/1e3}k`}),e.jsx(S,{formatter:s=>t(Number(s??0))}),e.jsx(se,{type:"monotone",dataKey:"revenue",stroke:"#10b981",strokeWidth:2,fillOpacity:1,fill:"url(#colorRevenue)",name:"Revenue"})]})})})})]}),e.jsxs(r,{children:[e.jsxs(o,{children:[e.jsx(d,{children:"Plan Distribution"}),e.jsx(u,{children:"Subscriptions by plan tier"})]}),e.jsx(m,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(N,{width:"100%",height:"100%",children:e.jsxs(ae,{data:[{name:"Free",value:35},{name:"Starter",value:28},{name:"Pro",value:18},{name:"Enterprise",value:4}],children:[e.jsx(y,{strokeDasharray:"3 3",stroke:"#e2e8f0"}),e.jsx(w,{dataKey:"name",stroke:"#64748b",fontSize:12}),e.jsx(C,{stroke:"#64748b",fontSize:12}),e.jsx(S,{}),e.jsx(te,{dataKey:"value",fill:"#6366f1",radius:[4,4,0,0]})]})})})})]})]}),e.jsxs(r,{children:[e.jsxs(o,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(d,{children:"Recent Invoices"}),e.jsx(u,{children:"Latest billing activity"})]}),e.jsx(g,{variant:"outline",size:"sm",asChild:!0,children:e.jsx(O,{to:"/billing",children:"View All"})})]}),e.jsx(m,{children:e.jsx("div",{className:"space-y-4",children:[{id:"INV-001",tenant:"Acme Corp",amount:299,status:"paid",date:"2024-01-15"},{id:"INV-002",tenant:"TechStart Inc",amount:99,status:"paid",date:"2024-01-14"},{id:"INV-003",tenant:"Beta LLC",amount:599,status:"pending",date:"2024-01-13"},{id:"INV-004",tenant:"Gamma Co",amount:99,status:"overdue",date:"2024-01-10"}].map((s,n)=>e.jsxs(Z.div,{initial:v?!1:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:v?{duration:0}:{delay:n*.05},className:"flex items-center justify-between p-3 rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:V("p-2 rounded-full",s.status==="paid"&&"bg-green-500/10 text-green-600",s.status==="pending"&&"bg-amber-500/10 text-amber-600",s.status==="overdue"&&"bg-red-500/10 text-red-600"),children:e.jsx(c,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.id}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.tenant})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"font-medium",children:t(s.amount)}),e.jsx(b,{variant:s.status==="paid"?"success":s.status==="pending"?"warning":"destructive",children:s.status})]})]},s.id))})})]})]}),e.jsx(h,{value:"subscriptions",className:"space-y-6",children:e.jsx(r,{children:e.jsx(H,{columns:I,data:p,isLoading:T,searchable:!0,searchPlaceholder:"Search subscriptions…",pagination:!0,pageSize:10,exportable:!0,exportFileName:"subscriptions"})})}),e.jsx(h,{value:"invoices",className:"space-y-6",children:e.jsxs(r,{className:"p-12 text-center",children:[e.jsx(c,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold",children:"Invoice Management"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Full invoice management coming soon"})]})})]})]})}export{be as component};
