import{j as e,r as n,bz as y,bO as u,bY as N,bt as v,by as w}from"./vendor-DTXcECKj.js";import{f as C,B as i,L as h,j as b,l as S}from"./main-D_qbY1gz.js";import{I as k}from"./Input-CvXUl1_l.js";import{C as x,d as p,a as I,b as P,c as R}from"./Card-ovhP7agJ.js";import{H as B,u as E,f as F}from"./HostedLayout-DYymfZHG.js";import{u as L,m as H}from"./vendor-motion-DirI8ZVJ.js";import"./vendor-sonner-CauEFWQC.js";import"./vendor-sentry-DWdptYQI.js";function _(){return e.jsx(B,{searchParams:new URLSearchParams(window.location.search),children:e.jsx(A,{})})}function A(){const{config:f,tenantId:t}=E(),j=L(),[l,o]=n.useState(!1),[c,d]=n.useState(null),[g,m]=n.useState(!1),r=C({defaultValues:{email:""},onSubmit:async({value:s})=>{if(t){o(!0),d(null);try{await F({data:{email:s.email,tenantId:t}}),m(!0)}catch(a){d(a instanceof Error?a.message:"Failed to send reset email")}finally{o(!1)}}}});return!f||!t?null:g?e.jsx(x,{className:"shadow-elevated",children:e.jsx(p,{className:"pt-6",children:e.jsxs(H.div,{initial:j?!1:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"text-center space-y-6 py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 dark:bg-green-900/20 rounded-full flex items-center justify-center mx-auto",children:e.jsx(y,{className:"w-8 h-8 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold",children:"Check your email"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["We've sent password reset instructions to ",e.jsx("strong",{children:r.getFieldValue("email")})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"The link will expire in 1 hour."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(i,{variant:"outline",fullWidth:!0,onClick:()=>m(!1),children:"Use a different email"}),e.jsx(h,{to:"/hosted/sign-in",search:{tenant_id:t},className:"block",children:e.jsxs(i,{variant:"ghost",fullWidth:!0,className:"gap-2",children:[e.jsx(u,{className:"h-4 w-4"}),"Back to Sign In"]})})]})]})})}):e.jsxs(x,{className:"shadow-elevated",children:[e.jsxs(I,{className:"space-y-1",children:[e.jsx("div",{className:"mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-2",children:e.jsx(N,{className:"h-6 w-6 text-primary"})}),e.jsx(P,{className:"text-2xl text-center",children:"Forgot password?"}),e.jsx(R,{className:"text-center",children:"Enter your email and we'll send you reset instructions"})]}),e.jsxs(p,{className:"space-y-4",children:[c&&e.jsxs(b,{variant:"destructive",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsx(S,{children:c})]}),e.jsxs("form",{onSubmit:s=>{s.preventDefault(),s.stopPropagation(),r.handleSubmit()},className:"space-y-4",children:[e.jsx(r.Field,{name:"email",validators:{onChange:({value:s})=>{if(!s.trim())return"Email is required";if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s))return"Please enter a valid email"}},children:s=>e.jsx(k,{label:"Email",type:"email",placeholder:"you@example.com",value:s.state.value,onChange:a=>s.handleChange(a.target.value),onBlur:s.handleBlur,error:s.state.meta.isTouched?s.state.meta.errors[0]:void 0,leftIcon:e.jsx(w,{className:"h-4 w-4 text-muted-foreground"}),autoComplete:"email",autoCapitalize:"none",spellCheck:!1,required:!0,disabled:l})}),e.jsx(i,{type:"submit",fullWidth:!0,size:"lg",isLoading:l,children:"Send Reset Instructions"})]}),e.jsx("div",{className:"text-center pt-4 border-t",children:e.jsxs(h,{to:"/hosted/sign-in",search:{tenant_id:t},className:"inline-flex items-center gap-2 text-sm text-primary hover:underline",children:[e.jsx(u,{className:"h-4 w-4"}),"Back to Sign In"]})})]})]})}export{_ as component};
